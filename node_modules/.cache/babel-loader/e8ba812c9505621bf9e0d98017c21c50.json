{"ast":null,"code":"import _slicedToArray from \"/Users/pcclarke/Documents/GitHub/civ-techs/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Wheel.js\";\nimport React, { useState } from 'react';\nimport { getLeadsTo, getTechById, getTechPrereqs } from '../libs/dataTools.js';\nimport { setupData } from '../libs/setupData.js';\nimport { setImageLink, oxfordizer } from '../libs/stringTools.js';\nimport { scaleOrdinal as d3_scaleOrdinal } from 'd3-scale';\nimport { schemeCategory10 as d3_schemeCategory10 } from 'd3-scale-chromatic';\nimport Arc from './Arc';\nimport RequirementsModal from './RequirementsModal';\nimport startSlice from '../img/startSlice.png';\nconst dataTypes = ['units', 'buildings', 'religions', 'build', 'resources', 'projects', 'promotions', 'civics'];\n\nfunction Wheel(props) {\n  const arcSpace = props.arcSpace,\n        gameData = props.gameData,\n        empire = props.empire,\n        game = props.game;\n  const angleShift = 2;\n  const arcBaseRadius = 100;\n  const arcStrokeWidth = 1.5;\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 10\n  },\n        width = 1200 - margin.left - margin.right,\n        height = 1200 - margin.top - margin.bottom;\n  const nonTechnologies = {};\n\n  for (let category in gameData) {\n    if (category !== 'technologies') {\n      gameData[category].forEach(reference => {\n        nonTechnologies[reference.id] = reference;\n      });\n    }\n  }\n\n  const data = setupData(gameData, nonTechnologies, +game[3], dataTypes);\n  console.log(data);\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        notFaded = _useState2[0],\n        setNotFaded = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        tempArcs = _useState4[0],\n        setTempArcs = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        notUnlockFaded = _useState6[0],\n        setNotUnlockFaded = _useState6[1];\n\n  const _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        displayModal = _React$useState2[0],\n        setDisplayModal = _React$useState2[1];\n\n  const _React$useState3 = React.useState({}),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        modalInfo = _React$useState4[0],\n        setModalInfo = _React$useState4[1];\n\n  const color = d3_scaleOrdinal(d3_schemeCategory10);\n\n  const updateDataFade = d => {\n    let minRank = 50;\n    let updateNotFaded = getTechPrereqs(d, data);\n    let updateTempArcs = updateNotFaded.map(n => {\n      let tempDist;\n      let tempBack;\n\n      if (d.pos > n.pos) {\n        tempDist = (d.pos - n.pos) * (2 * Math.PI / data.displayed.length);\n        tempBack = 0;\n      } else if (d.pos < n.pos) {\n        tempDist = 0;\n        tempBack = (d.pos - n.pos) * (2 * Math.PI / data.displayed.length);\n      } else if (d.pos === n.pos) {\n        tempDist = n.arcDist;\n        tempBack = n.arcBack;\n      }\n\n      let lopt = [];\n\n      if (n.id === d.id) {\n        lopt = d.lopt;\n      } else {\n        n.lopt.forEach(o => {\n          if (o.id === d.id) {\n            lopt.push(o);\n          }\n        });\n      }\n\n      let lreq = [];\n\n      if (n.id === d.id) {\n        lreq = d.lreq;\n      } else {\n        n.lreq.forEach(r => {\n          if (r.id === d.id) {\n            lreq.push(r);\n          }\n        });\n      }\n\n      let spokeRank = 50;\n\n      if (d.pos === n.pos) {\n        spokeRank = minRank;\n      } else {\n        lopt.forEach(o => {\n          if (o.rank < spokeRank) {\n            spokeRank = o.rank;\n          }\n        });\n        lreq.forEach(r => {\n          if (r.rank < spokeRank) {\n            spokeRank = r.rank;\n          }\n        });\n      }\n\n      if (spokeRank < minRank) {\n        minRank = spokeRank;\n      }\n\n      return {\n        arcBack: tempBack,\n        arcDist: tempDist,\n        rank: n.rank,\n        id: n.id,\n        lopt: lopt,\n        lreq: lreq,\n        pos: n.pos,\n        spokeRank: spokeRank,\n        unlocks: n.unlocks\n      };\n    });\n    updateNotFaded = updateNotFaded.concat(d);\n    updateNotFaded = updateNotFaded.concat(getLeadsTo(d, data.displayed));\n    updateTempArcs.push(d);\n    getLeadsTo(d, data.displayed).forEach(l => {\n      updateTempArcs.push({\n        arcBack: 0,\n        arcDist: 0,\n        rank: 0,\n        id: l.id,\n        lopt: [],\n        lreq: [],\n        pos: l.pos,\n        spokeRank: d.rank,\n        unlocks: l.unlocks\n      });\n    });\n    setNotFaded(updateNotFaded);\n    setTempArcs(updateTempArcs);\n  };\n\n  const setFade = d => {\n    if (notFaded.length > 0) {\n      const notFadedIds = notFaded.map(n => n.id);\n\n      if (notFadedIds.indexOf(d.id) < 0) {\n        return 'fade';\n      }\n    }\n\n    return '';\n  };\n\n  const updateUnlockFade = u => {\n    if (u) {\n      setNotUnlockFaded(u);\n    } else {\n      setNotUnlockFaded(null);\n    }\n  };\n\n  const setUnlockFade = u => {\n    if (notUnlockFaded) {\n      return u === notUnlockFaded ? '' : 'fade';\n    }\n  };\n\n  function displayUnlockModal(reference, data) {\n    let requirements = [];\n    reference.requires.forEach(requirementId => {\n      requirements.push(getTechById(requirementId, data).name);\n    });\n    let prepModalInfo = {\n      imagePath: setImageLink(reference, game, empire),\n      requirements: oxfordizer(requirements, 'and'),\n      title: reference.name ? reference.name : reference[empire].name\n    };\n\n    if (reference.optional) {\n      let optionals = [];\n      reference.optional.forEach(optionalId => {\n        optionals.push(getTechById(optionalId, data).name);\n      });\n      prepModalInfo.optionals = oxfordizer(optionals, 'or');\n    }\n\n    if (reference.lreq) {\n      let leadsRequirements = [];\n      reference.lreq.forEach(leadsReq => {\n        leadsRequirements.push(getTechById(leadsReq.id, data).name);\n      });\n      prepModalInfo.leadsRequirements = oxfordizer(leadsRequirements, 'and');\n    }\n\n    if (reference.lopt) {\n      let leadsOptionals = [];\n      reference.lopt.forEach(leadsOpt => {\n        leadsOptionals.push(getTechById(leadsOpt.id, data).name);\n      });\n      prepModalInfo.leadsOptionals = oxfordizer(leadsOptionals, 'and');\n    }\n\n    setModalInfo(prepModalInfo);\n    setDisplayModal(true);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    width: width + margin.left + margin.right,\n    height: height + margin.top + margin.bottom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    className: \"civTechs\",\n    transform: \"translate(\".concat(margin.left, \", \").concat(margin.top, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    className: \"wheel\",\n    transform: \"translate(\".concat(width / 2, \", \").concat(height / 2, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, React.createElement(\"image\", {\n    id: \"startSlice\",\n    x: 0,\n    y: -(height / 2),\n    width: 167,\n    height: height / 2,\n    xlinkHref: startSlice,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }), notFaded.length > 0 && tempArcs.length > 0 && React.createElement(\"g\", {\n    className: \"tempArcs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }, tempArcs.map((t, i) => React.createElement(\"g\", {\n    className: \"temp-spokes\",\n    key: \"temp-spokes-\".concat(i),\n    transform: \"rotate(\".concat(t.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252\n    },\n    __self: this\n  }, React.createElement(\"line\", {\n    className: \"spokeLine\",\n    x1: 0,\n    y1: -(arcBaseRadius + arcSpace * t.spokeRank),\n    x2: 0,\n    y2: -(width / 2) + 160 - t.unlocks.length * 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  }))), tempArcs.filter(t => t.lopt.length > 0 || t.lreq.length > 0).map((t, i) => React.createElement(\"g\", {\n    className: \"tempGroup\",\n    key: \"temp-arcs-\".concat(i),\n    transform: \"rotate(\".concat(t.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }, React.createElement(Arc, {\n    baseRadius: 100,\n    className: 'tempArc',\n    colour: color,\n    data: t,\n    space: arcSpace,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }), React.createElement(\"line\", {\n    className: \"tempSpokePin\",\n    x1: 0,\n    y1: -(arcBaseRadius + 7 + arcSpace * t.rank),\n    x2: 0,\n    y2: -(arcBaseRadius - 5 + arcSpace * t.rank),\n    strokeWidth: arcStrokeWidth,\n    stroke: color(t.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279\n    },\n    __self: this\n  }), t.lreq.map((r, j) => React.createElement(\"g\", {\n    className: \"tempReqSquare\",\n    key: \"req-square-\".concat(j),\n    transform: (() => {\n      const ang = r.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBaseRadius - 2.5 - arcSpace * r.rank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(r.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297\n    },\n    __self: this\n  }))), t.lopt.map((o, j) => React.createElement(\"g\", {\n    className: \"optCircle\",\n    key: \"opt-circle-\".concat(j),\n    transform: (() => {\n      const ang = o.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBaseRadius - 2.5 - arcSpace * o.rank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, React.createElement(\"circle\", {\n    cx: 0,\n    cy: 2,\n    r: 2.5,\n    strokeWidth: 1,\n    stroke: color(o.pos),\n    fill: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315\n    },\n    __self: this\n  })))))), React.createElement(\"g\", {\n    className: \"spokeAll\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330\n    },\n    __self: this\n  }, data.displayed.map((d, i) => React.createElement(\"g\", {\n    className: \"\".concat(d.id, \" spoke\"),\n    key: \"spoke-\".concat(i),\n    transform: \"rotate(\".concat(d.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, React.createElement(\"line\", {\n    className: \"spokeLine \".concat(notFaded.length > 0 ? 'fade' : ''),\n    x1: 0,\n    y1: !d.requires && !d.optional ? 0 : -(arcBaseRadius + arcSpace * d.spokeRank),\n    x2: 0,\n    y2: -(width / 2) + 160 - d.unlocks.length * 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338\n    },\n    __self: this\n  }), React.createElement(\"image\", {\n    className: \"techImg \".concat(setFade(d)),\n    height: 25,\n    onClick: () => displayUnlockModal(d, data),\n    onMouseLeave: () => setNotFaded([]),\n    onMouseOver: () => updateDataFade(d),\n    transform: (() => d.pos > data.displayed.length / 2 ? \"translate(10, \".concat(-(width / 2) + 157, \") rotate(90)\") : \"translate(-10, \".concat(-(width / 2) + 182, \") rotate(270)\"))(),\n    width: 25,\n    xlinkHref: \"/\".concat(game, \"/\").concat(d.cat, \"/\").concat(d.id, \".png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345\n    },\n    __self: this\n  }), d.unlocks.map((u, j) => React.createElement(\"g\", {\n    key: \"unlock-\".concat(j),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358\n    },\n    __self: this\n  }, u.lreq && React.createElement(\"g\", {\n    className: \"unlock \".concat(notUnlockFaded === u.ref.id ? '' : 'opaque', \" \").concat(u.ref.id).concat(u.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360\n    },\n    __self: this\n  }, React.createElement(Arc, {\n    baseRadius: 442.5,\n    className: \"unlockArc\",\n    colour: color,\n    data: u,\n    space: 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361\n    },\n    __self: this\n  }), u.lreq.map((l, k) => React.createElement(\"g\", {\n    className: \"unlockSquare\",\n    key: \"unlock-square-\".concat(k),\n    transform: \"rotate(\".concat(l.dist * (360 / data.displayed.length), \") translate(0, \").concat(-(width / 2) + 145 - 14 * l.rank, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(l.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374\n    },\n    __self: this\n  })))), React.createElement(\"image\", {\n    className: \"unlockIcon \".concat(setFade(d), \" \").concat(setUnlockFade(u.ref.id)),\n    height: 13,\n    onClick: () => displayUnlockModal(u.ref, data),\n    onMouseLeave: () => updateUnlockFade(),\n    onMouseOver: () => updateUnlockFade(u.ref.id),\n    transform: (() => u.pos > data.displayed.length / 2 ? \"translate(6, \".concat(-(width / 2) + (142 - 14 * u.rank), \") rotate(90)\") : \"translate(-6, \".concat(-(width / 2) + (153 - 14 * u.rank), \") rotate(270)\"))(),\n    width: 13,\n    xlinkHref: (() => setImageLink(u.ref, game, empire))(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385\n    },\n    __self: this\n  })))))), React.createElement(\"g\", {\n    className: \"reqArcs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404\n    },\n    __self: this\n  }, data.displayed.map((d, i) => React.createElement(\"g\", {\n    className: \"\".concat(d.id, \" reqGroup \").concat(notFaded.length > 0 ? 'fade' : ''),\n    key: \"req-arcs-\".concat(i),\n    transform: \"rotate(\".concat(d.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406\n    },\n    __self: this\n  }, React.createElement(Arc, {\n    baseRadius: 100,\n    className: 'spokeArc',\n    colour: color,\n    data: d,\n    space: arcSpace,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411\n    },\n    __self: this\n  }), React.createElement(\"line\", {\n    className: \"spokePin\",\n    x1: 0,\n    y1: -(arcBaseRadius + 7 + arcSpace * d.rank),\n    x2: 0,\n    y2: -(arcBaseRadius - 5 + arcSpace * d.rank),\n    strokeWidth: arcStrokeWidth,\n    stroke: color(d.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418\n    },\n    __self: this\n  }), d.lreq.map((r, j) => React.createElement(\"g\", {\n    className: \"reqSquare\",\n    key: \"req-square-\".concat(j),\n    transform: (() => {\n      const ang = r.dist * (360 / data.displayed.length);\n\n      if (d.id === 'TECH_FISHING') {}\n\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBaseRadius - 2.5 - arcSpace * r.rank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(r.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439\n    },\n    __self: this\n  }))), d.lopt.map((o, j) => React.createElement(\"g\", {\n    className: \"optCircle\",\n    key: \"opt-circle-\".concat(j),\n    transform: (() => {\n      const ang = o.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBaseRadius - 2.5 - arcSpace * o.rank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449\n    },\n    __self: this\n  }, React.createElement(\"circle\", {\n    cx: 0,\n    cy: 2,\n    r: 2.5,\n    strokeWidth: 1,\n    stroke: color(o.pos),\n    fill: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457\n    },\n    __self: this\n  })))))), React.createElement(\"image\", {\n    x: -75,\n    y: -75,\n    width: 150,\n    height: 150,\n    xlinkHref: \"\".concat(game, \"/\").concat(game, \"-center.png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471\n    },\n    __self: this\n  })))), React.createElement(RequirementsModal, {\n    close: () => setDisplayModal(false),\n    display: displayModal,\n    imagePath: modalInfo.imagePath,\n    leadsRequirements: modalInfo.leadsRequirements,\n    leadsOptionals: modalInfo.leadsOptionals,\n    optionals: modalInfo.optionals,\n    requirements: modalInfo.requirements,\n    title: modalInfo.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482\n    },\n    __self: this\n  }));\n}\n\nexport default Wheel;","map":{"version":3,"sources":["/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Wheel.js"],"names":["React","useState","getLeadsTo","getTechById","getTechPrereqs","setupData","setImageLink","oxfordizer","scaleOrdinal","d3_scaleOrdinal","schemeCategory10","d3_schemeCategory10","Arc","RequirementsModal","startSlice","dataTypes","Wheel","props","arcSpace","gameData","empire","game","angleShift","arcBaseRadius","arcStrokeWidth","margin","top","right","bottom","left","width","height","nonTechnologies","category","forEach","reference","id","data","console","log","notFaded","setNotFaded","tempArcs","setTempArcs","notUnlockFaded","setNotUnlockFaded","displayModal","setDisplayModal","modalInfo","setModalInfo","color","updateDataFade","d","minRank","updateNotFaded","updateTempArcs","map","n","tempDist","tempBack","pos","Math","PI","displayed","length","arcDist","arcBack","lopt","o","push","lreq","r","spokeRank","rank","unlocks","concat","l","setFade","notFadedIds","indexOf","updateUnlockFade","u","setUnlockFade","displayUnlockModal","requirements","requires","requirementId","name","prepModalInfo","imagePath","title","optional","optionals","optionalId","leadsRequirements","leadsReq","leadsOptionals","leadsOpt","t","i","filter","j","ang","dist","cat","ref","k"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\n\nimport {\n  getLeadsTo,\n  getTechById,\n  getTechPrereqs\n} from '../libs/dataTools.js';\nimport {setupData} from '../libs/setupData.js';\nimport {setImageLink, oxfordizer} from '../libs/stringTools.js';\n\nimport {scaleOrdinal as d3_scaleOrdinal} from 'd3-scale';\nimport {schemeCategory10 as d3_schemeCategory10} from 'd3-scale-chromatic';\n\nimport Arc from './Arc';\nimport RequirementsModal from './RequirementsModal';\n\nimport startSlice from '../img/startSlice.png';\n\nconst dataTypes = [\n  'units',\n  'buildings',\n  'religions',\n  'build',\n  'resources',\n  'projects',\n  'promotions',\n  'civics',\n];\n\nfunction Wheel(props) {\n  const {\n    arcSpace,\n    gameData,\n    empire,\n    game,\n  } = props;\n\n  const angleShift = 2;\n  const arcBaseRadius = 100;\n  const arcStrokeWidth = 1.5;\n  const margin = {top: 10, right: 10, bottom: 10, left: 10},\n    width = 1200 - margin.left - margin.right,\n    height = 1200 - margin.top - margin.bottom;\n\n  const nonTechnologies = {};\n  for (let category in gameData) {\n    if (category !== 'technologies') {\n      gameData[category].forEach((reference) => {\n        nonTechnologies[reference.id] = reference;\n      });\n    }\n  }\n\n  const data = setupData(gameData, nonTechnologies, +(game[3]), dataTypes);\n\n  console.log(data);\n\n  const [notFaded, setNotFaded] = useState([]);\n  const [tempArcs, setTempArcs] = useState([]);\n  const [notUnlockFaded, setNotUnlockFaded] = useState(null);\n  const [displayModal, setDisplayModal] = React.useState(false);\n  const [modalInfo, setModalInfo] = React.useState({});\n\n  const color = d3_scaleOrdinal(d3_schemeCategory10);\n\n  const updateDataFade = (d) => {\n    let minRank = 50;\n    let updateNotFaded = getTechPrereqs(d, data);\n\n    let updateTempArcs = updateNotFaded.map((n) => {\n      let tempDist;\n      let tempBack;\n      if (d.pos > n.pos) {\n        tempDist = (d.pos - n.pos) * ((2 * Math.PI) / data.displayed.length);\n        tempBack = 0;\n      } else if (d.pos < n.pos) {\n        tempDist = 0;\n        tempBack = (d.pos - n.pos) * ((2 * Math.PI) / data.displayed.length);\n      } else if (d.pos === n.pos) {\n        tempDist = n.arcDist;\n        tempBack = n.arcBack;\n      }\n\n      let lopt = [];\n      if (n.id === d.id) {\n        lopt = d.lopt;\n      } else {\n        n.lopt.forEach((o) => {\n          if (o.id === d.id) {\n            lopt.push(o);\n          }\n        });\n      }\n\n      let lreq = [];\n      if (n.id === d.id) {\n        lreq = d.lreq;\n      } else {\n        n.lreq.forEach((r) => {\n          if (r.id === d.id) {\n            lreq.push(r);\n          }\n        });\n      }\n\n      let spokeRank = 50;\n\n      if (d.pos === n.pos) {\n        spokeRank = minRank;\n      } else {\n        lopt.forEach((o) => {\n          if (o.rank < spokeRank) {\n            spokeRank = o.rank;\n          }\n        });\n        lreq.forEach((r) => {\n          if (r.rank < spokeRank) {\n            spokeRank = r.rank;\n          }\n        });\n      }\n      if (spokeRank < minRank) {\n        minRank = spokeRank;\n      }\n\n      return {\n        arcBack: tempBack,\n        arcDist: tempDist,\n        rank: n.rank,\n        id: n.id,\n        lopt: lopt,\n        lreq: lreq,\n        pos: n.pos,\n        spokeRank: spokeRank,\n        unlocks: n.unlocks,\n      };\n    });\n    updateNotFaded = updateNotFaded.concat(d);\n    updateNotFaded = updateNotFaded.concat(getLeadsTo(d, data.displayed));\n\n    updateTempArcs.push(d);\n    getLeadsTo(d, data.displayed).forEach((l) => {\n      updateTempArcs.push({\n        arcBack: 0,\n        arcDist: 0,\n        rank: 0,\n        id: l.id,\n        lopt: [],\n        lreq: [],\n        pos: l.pos,\n        spokeRank: d.rank,\n        unlocks: l.unlocks,\n      });\n    });\n\n    setNotFaded(updateNotFaded);\n    setTempArcs(updateTempArcs);\n  };\n\n  const setFade = (d) => {\n    if (notFaded.length > 0) {\n      const notFadedIds = notFaded.map((n) => n.id);\n\n      if (notFadedIds.indexOf(d.id) < 0) {\n        return 'fade';\n      }\n    }\n\n    return '';\n  }\n\n  const updateUnlockFade = (u) => {\n    if (u) {\n      setNotUnlockFaded(u);\n    } else {\n      setNotUnlockFaded(null);\n    }\n  }\n\n  const setUnlockFade = (u) => {\n    if (notUnlockFaded) {\n      return (u === notUnlockFaded) ? '' : 'fade';\n    }\n  }\n\n  function displayUnlockModal(reference, data) {\n    let requirements = [];\n    reference.requires.forEach((requirementId) => {\n      requirements.push(getTechById(requirementId, data).name);\n    });\n\n    let prepModalInfo = {\n      imagePath: setImageLink(reference, game, empire),\n      requirements: oxfordizer(requirements, 'and'),\n      title: (reference.name) ? reference.name: reference[empire].name,\n    };\n\n    if (reference.optional) {\n      let optionals = [];\n      reference.optional.forEach((optionalId) => {\n        optionals.push(getTechById(optionalId, data).name);\n      });\n      prepModalInfo.optionals = oxfordizer(optionals, 'or');\n    }\n\n    if (reference.lreq) {\n      let leadsRequirements = [];\n      reference.lreq.forEach((leadsReq) => {\n        leadsRequirements.push(getTechById(leadsReq.id, data).name);\n      });\n      prepModalInfo.leadsRequirements = oxfordizer(leadsRequirements, 'and');\n    }\n\n    if (reference.lopt) {\n      let leadsOptionals = [];\n      reference.lopt.forEach((leadsOpt) => {\n        leadsOptionals.push(getTechById(leadsOpt.id, data).name);\n      });\n      prepModalInfo.leadsOptionals = oxfordizer(leadsOptionals, 'and');\n    }\n\n    setModalInfo(prepModalInfo);\n\n    setDisplayModal(true);\n  }\n\n  return (\n    <div>\n      <svg\n        width={width + margin.left + margin.right}\n        height={height + margin.top + margin.bottom}\n      >\n        <g\n          className='civTechs'\n          transform={`translate(${margin.left}, ${margin.top})`}\n        >\n          <g\n            className='wheel'\n            transform={`translate(${width / 2}, ${height / 2})`}\n          >\n            <image\n              id='startSlice'\n              x={0}\n              y={-(height/2)}\n              width={167}\n              height={height/2}\n              xlinkHref={startSlice}\n            />\n            {(notFaded.length > 0 && tempArcs.length > 0) &&\n              <g className='tempArcs'>\n                {tempArcs.map((t, i) => (\n                  <g\n                    className='temp-spokes'\n                    key={`temp-spokes-${i}`}\n                    transform={`rotate(${t.pos * (360 / data.displayed.length) + angleShift})`}\n                  >\n                    <line\n                      className='spokeLine'\n                      x1={0}\n                      y1={-(arcBaseRadius + (arcSpace * t.spokeRank))}\n                      x2={0}\n                      y2={-(width / 2) + 160 - (t.unlocks.length * 14)}\n                    />\n                  </g>\n                ))}\n                {tempArcs.filter((t) => t.lopt.length > 0 || t.lreq.length > 0).map((t, i) => (\n                  <g\n                    className='tempGroup'\n                    key={`temp-arcs-${i}`}\n                    transform={`rotate(${t.pos * (360 / data.displayed.length) + angleShift})`}\n                  >\n                    <Arc\n                      baseRadius={100}\n                      className={'tempArc'}\n                      colour={color}\n                      data={t}\n                      space={arcSpace}\n                    />\n                    <line\n                      className='tempSpokePin'\n                      x1={0}\n                      y1={-(arcBaseRadius + 7 + (arcSpace * t.rank))}\n                      x2={0}\n                      y2={-(arcBaseRadius - 5 + (arcSpace * t.rank))}\n                      strokeWidth={arcStrokeWidth}\n                      stroke={color(t.pos)}\n                    />\n                   {t.lreq.map((r, j) => (\n                      <g\n                        className='tempReqSquare'\n                        key={`req-square-${j}`}\n                        transform={(() => {\n                          const ang = r.dist * (360 / data.displayed.length);\n                          return `rotate(${ang}) translate(0, ${(-arcBaseRadius - 2.5 - (arcSpace * r.rank))})`;\n                        })()}\n                      >\n                        <rect\n                          x={-2.5}\n                          y={-0.75}\n                          width={5}\n                          height={5}\n                          fill={color(r.pos)}\n                        />\n                      </g>\n                    ))}\n                    {t.lopt.map((o, j) => (\n                      <g\n                        className='optCircle'\n                        key={`opt-circle-${j}`}\n                        transform={(() => {\n                          const ang = o.dist * (360 / data.displayed.length);\n                          return `rotate(${ang}) translate(0, ${(-arcBaseRadius - 2.5 - (arcSpace * o.rank))})`;\n                        })()}\n                      >\n                        <circle\n                          cx={0}\n                          cy={2}\n                          r={2.5}\n                          strokeWidth={1}\n                          stroke={color(o.pos)}\n                          fill='white'\n                        />\n                      </g>\n                    ))}\n                  </g>\n                ))}\n              </g>\n            }\n\n            <g className='spokeAll'>\n              {\n                data.displayed.map((d, i) => (\n                  <g\n                    className={`${d.id} spoke`}\n                    key={`spoke-${i}`}\n                    transform={`rotate(${d.pos * (360 / data.displayed.length) + angleShift})`}\n                  >\n                    <line\n                      className={`spokeLine ${(notFaded.length > 0) ? 'fade' : ''}`}\n                      x1={0}\n                      y1={(!d.requires && !d.optional) ? 0 : -(arcBaseRadius + (arcSpace * d.spokeRank))}\n                      x2={0}\n                      y2={-(width / 2) + 160 - (d.unlocks.length * 14)}\n                    />\n                    <image\n                      className={`techImg ${setFade(d)}`}\n                      height={25}\n                      onClick={() => displayUnlockModal(d, data)}\n                      onMouseLeave={() => setNotFaded([])}\n                      onMouseOver={() => updateDataFade(d)}\n                      transform={(() => (d.pos > (data.displayed.length / 2)) ?\n                        `translate(10, ${(-(width / 2) + 157)}) rotate(90)` :\n                        `translate(-10, ${(-(width / 2) + 182)}) rotate(270)`)()}\n                      width={25}\n                      xlinkHref={`/${game}/${d.cat}/${d.id}.png`}\n                    />\n                    {d.unlocks.map((u, j) => (\n                      <g key={`unlock-${j}`}>\n                        {u.lreq &&\n                          <g className={`unlock ${(notUnlockFaded === u.ref.id) ? '' : 'opaque'} ${u.ref.id}${u.pos}`}>\n                            <Arc\n                              baseRadius={442.5}\n                              className='unlockArc'\n                              colour={color}\n                              data={u}\n                              space={14}\n                            />\n                            {u.lreq.map((l, k) => (\n                              <g\n                                className='unlockSquare'\n                                key={`unlock-square-${k}`}\n                                transform={`rotate(${l.dist * (360 / data.displayed.length)}) translate(0, ${(-(width/2) + 145 - (14 * l.rank))})`}\n                              >\n                                <rect\n                                  x={-2.5}\n                                  y={-0.75}\n                                  width={5}\n                                  height={5}\n                                  fill={color(l.pos)}\n                                />\n                              </g>\n                            ))}\n                          </g>\n                        }\n                        <image\n                          className={`unlockIcon ${setFade(d)} ${setUnlockFade(u.ref.id)}`}\n                          height={13}\n                          onClick={() => displayUnlockModal(u.ref, data)}\n                          onMouseLeave={() => updateUnlockFade()}\n                          onMouseOver={() => updateUnlockFade(u.ref.id)}\n                          transform={(() => (u.pos > (data.displayed.length / 2)) ?\n                            `translate(6, ${(-(width / 2) + (142 - (14 * u.rank)))}) rotate(90)` :\n                            `translate(-6, ${(-(width / 2) + (153 - (14 * u.rank)))}) rotate(270)`)()}\n                          width={13}\n                          xlinkHref={(() => setImageLink(u.ref, game, empire))()}\n                        />\n                      </g>\n                    ))}\n                  </g>\n                ))\n              }\n            </g>\n\n            <g className='reqArcs'>\n              {data.displayed.map((d, i) => (\n                <g\n                  className={`${d.id} reqGroup ${(notFaded.length > 0) ? 'fade' : ''}`}\n                  key={`req-arcs-${i}`}\n                  transform={`rotate(${d.pos * (360 / data.displayed.length) + angleShift})`}\n                >\n                  <Arc\n                    baseRadius={100}\n                    className={'spokeArc'}\n                    colour={color}\n                    data={d}\n                    space={arcSpace}\n                  />\n                  <line\n                    className='spokePin'\n                    x1={0}\n                    y1={-(arcBaseRadius + 7 + (arcSpace * d.rank))}\n                    x2={0}\n                    y2={-(arcBaseRadius - 5 + (arcSpace * d.rank))}\n                    strokeWidth={arcStrokeWidth}\n                    stroke={color(d.pos)}\n                  />\n                  {d.lreq.map((r, j) => (\n                    <g\n                      className='reqSquare'\n                      key={`req-square-${j}`}\n                      transform={(() => {\n\n                        const ang = r.dist * (360 / data.displayed.length);\n                        if (d.id === 'TECH_FISHING') {\n                        }\n                        return `rotate(${ang}) translate(0, ${(-arcBaseRadius - 2.5 - (arcSpace * r.rank))})`;\n                      })()}\n                    >\n                      <rect\n                        x={-2.5}\n                        y={-0.75}\n                        width={5}\n                        height={5}\n                        fill={color(r.pos)}\n                      />\n                    </g>\n                  ))}\n                  {d.lopt.map((o, j) => (\n                    <g\n                      className='optCircle'\n                      key={`opt-circle-${j}`}\n                      transform={(() => {\n                        const ang = o.dist * (360 / data.displayed.length);\n                        return `rotate(${ang}) translate(0, ${(-arcBaseRadius - 2.5 - (arcSpace * o.rank))})`;\n                      })()}\n                    >\n                      <circle\n                        cx={0}\n                        cy={2}\n                        r={2.5}\n                        strokeWidth={1}\n                        stroke={color(o.pos)}\n                        fill='white'\n                      />\n                    </g>\n                  ))}\n                </g>\n              ))}\n            </g>\n\n            <image\n              x={-75}\n              y={-75}\n              width={150}\n              height={150}\n              xlinkHref={`${game}/${game}-center.png`}\n            />\n          </g>\n        </g>\n      </svg>\n\n      <RequirementsModal\n        close={() => setDisplayModal(false)}\n        display={displayModal}\n        imagePath={modalInfo.imagePath}\n        leadsRequirements={modalInfo.leadsRequirements}\n        leadsOptionals={modalInfo.leadsOptionals}\n        optionals={modalInfo.optionals}\n        requirements={modalInfo.requirements}\n        title={modalInfo.title}\n      />\n    </div>\n  );\n}\n\nexport default Wheel;\n"]},"metadata":{},"sourceType":"module"}