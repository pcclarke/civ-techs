{"ast":null,"code":"// Get a list of the required technology prerequisites for a given thing\nexport function getReqTechPreReqs(examine, data) {\n  let preReqs = [];\n\n  if (examine.requires) {\n    data.technologies.forEach(t => {\n      if (Array.isArray(examine.requires)) {\n        examine.requires.forEach(r => {\n          if (r === t.id) {\n            preReqs.push(t);\n          }\n        });\n      } else {\n        if (examine.requires === t.id) {\n          preReqs.push(t);\n        }\n      }\n    });\n  }\n\n  return preReqs;\n}\n; // Get a list of the displayed things this technology leads to that require it\n\nexport function getLeadsToReq(examine, compareData) {\n  let leads = [];\n  compareData.forEach(function (d) {\n    if (d.requires) {\n      if (Array.isArray(d.requires)) {\n        d.requires.forEach(function (r) {\n          if (r === examine.id) {\n            leads.push(d);\n          }\n        });\n      } else {\n        if (d.requires === examine.id) {\n          leads.push(d);\n        }\n      }\n    }\n  });\n  return leads;\n}\n; // Get a list of the optional technology prerequisites for a given thing\n\nexport function getOptTechPreReqs(examine, data) {\n  var preReqs = [];\n\n  if (examine.optional) {\n    data.technologies.forEach(function (t) {\n      if (Array.isArray(examine.optional)) {\n        examine.optional.forEach(function (o) {\n          if (o === t.id) {\n            preReqs.push(t);\n          }\n        });\n      } else {\n        if (examine.optional === t.id) {\n          preReqs.push(t);\n        }\n      }\n    });\n  }\n\n  return preReqs;\n}\n; // Get a list of the displayed things this technology leads to that optionally require it\n\nexport function getLeadsToOpt(examine, compareData) {\n  var leads = [];\n  compareData.forEach(function (c) {\n    if (c.optional) {\n      if (Array.isArray(c.optional)) {\n        c.optional.forEach(function (o) {\n          if (o === examine.id) {\n            leads.push(c);\n          }\n        });\n      } else {\n        if (c.optional === examine.id) {\n          leads.push(c);\n        }\n      }\n    }\n  });\n  return leads;\n}\n; // Get a list of the technology prerequsites (required and optional) for a given thing (techs, units, whatever)\n\nexport function getTechPrereqs(examine, data) {\n  var preReqs = [];\n\n  if (examine.requires) {\n    data.technologies.forEach(function (t) {\n      if (Array.isArray(examine.requires)) {\n        examine.requires.forEach(function (r) {\n          if (r === t.id) {\n            preReqs.push(t);\n          }\n        });\n      } else {\n        if (examine.requires === t.id) {\n          preReqs.push(t);\n        }\n      }\n    });\n  }\n\n  if (examine.optional) {\n    data.technologies.forEach(function (t) {\n      if (Array.isArray(examine.optional)) {\n        examine.optional.forEach(function (o) {\n          if (o === t.id) {\n            preReqs.push(t);\n          }\n        });\n      } else {\n        if (examine.optional === t.id) {\n          preReqs.push(t);\n        }\n      }\n    });\n  }\n\n  return preReqs;\n}\n; // Get a list of the displayed things this technology leads to (required and optional)\n\nexport function getLeadsTo(examine, compareData) {\n  var leads = [];\n  compareData.forEach(function (c) {\n    if (c.requires) {\n      if (Array.isArray(c.requires)) {\n        c.requires.forEach(function (r) {\n          if (r === examine.id) {\n            leads.push(c);\n          }\n        });\n      } else {\n        if (c.requires === examine.id) {\n          leads.push(c);\n        }\n      }\n    }\n\n    if (c.optional) {\n      if (Array.isArray(c.optional)) {\n        c.optional.forEach(function (o) {\n          if (o === examine.id) {\n            leads.push(c);\n          }\n        });\n      } else {\n        if (c.optional === examine.id) {\n          leads.push(c);\n        }\n      }\n    }\n  });\n  return leads;\n}\n; // Returns a technology item by its Id\n\nexport function getTechById(examineId, data) {\n  var tech = \"BAD_ID\";\n  data.technologies.forEach(function (t) {\n    if (t.id === examineId) {\n      tech = t;\n    }\n  });\n  return tech;\n}\n; // For a given technology, creates a list including:\n// technologies that it requires (optional & mandatory)\n// technologies it leads to\n// anything else it leads to and the other technologies they require\n\nexport function findNearby(origin, data) {\n  var nearbyList;\n  var fartherList = [];\n  var obsoleteTech;\n  var otherReqs;\n  nearbyList = getTechPrereqs(origin, data);\n  nearbyList = nearbyList.concat(convertSpecial(origin));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.technologies));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.promotions));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.projects));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.build));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.buildings));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.civics));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.religions));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.resources));\n  nearbyList = nearbyList.concat(getLeadsTo(origin, data.units));\n  nearbyList.forEach(function (n) {\n    otherReqs = getTechPrereqs(n, data);\n    otherReqs.forEach(function (o) {\n      if (o.id !== origin.id) {\n        fartherList.push(o);\n      }\n    });\n  });\n  nearbyList = nearbyList.concat(fartherList);\n  nearbyList.push(origin);\n\n  if (origin.obsolete) {\n    obsoleteTech = getTechById(origin.obsolete, data);\n    nearbyList.push(obsoleteTech);\n  }\n\n  return nearbyList;\n}\n; // Converts the specials in a technology into prereq objects\n\nexport function convertSpecial(examine) {\n  let specials = [];\n\n  if (examine.special) {\n    examine.special.forEach(function (s) {\n      s.requires = [];\n      s.requires.push(examine.id);\n      s.cat = 'specials';\n      specials.push(s);\n    });\n  }\n\n  return specials;\n}\n;","map":{"version":3,"sources":["/Users/pcclarke/Documents/GitHub/civ-techs/src/libs/dataTools.js"],"names":["getReqTechPreReqs","examine","data","preReqs","requires","technologies","forEach","t","Array","isArray","r","id","push","getLeadsToReq","compareData","leads","d","getOptTechPreReqs","optional","o","getLeadsToOpt","c","getTechPrereqs","getLeadsTo","getTechById","examineId","tech","findNearby","origin","nearbyList","fartherList","obsoleteTech","otherReqs","concat","convertSpecial","promotions","projects","build","buildings","civics","religions","resources","units","n","obsolete","specials","special","s","cat"],"mappings":"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","sourcesContent":["// Get a list of the required technology prerequisites for a given thing\nexport function getReqTechPreReqs(examine, data) {\n    let preReqs = [];\n\n    if (examine.requires) {\n      data.technologies.forEach((t) => {\n        if (Array.isArray(examine.requires)) {\n          examine.requires.forEach((r) => {\n              if (r === t.id) {\n                  preReqs.push(t);\n              }\n          });\n        } else {\n          if (examine.requires === t.id) {\n              preReqs.push(t);\n          }\n        }\n      });\n    }\n\n    return preReqs;\n};\n\n// Get a list of the displayed things this technology leads to that require it\n export function getLeadsToReq(examine, compareData) {\n    let leads = [];\n    \n    compareData.forEach(function (d) {\n        if (d.requires) {\n            if (Array.isArray(d.requires)) {\n                d.requires.forEach(function (r) {\n                    if(r === examine.id) {\n                        leads.push(d);\n                    }\n                });\n            } else {\n                if (d.requires === examine.id) {\n                    leads.push(d);\n                }\n            }\n        }\n    });\n    \n    return leads;\n};\n\n// Get a list of the optional technology prerequisites for a given thing\nexport function getOptTechPreReqs (examine, data) {\n    var preReqs = [];\n\n    if (examine.optional) {\n        data.technologies.forEach(function (t) {\n            if (Array.isArray(examine.optional)) {\n                examine.optional.forEach(function (o) {\n                    if (o === t.id) {\n                        preReqs.push(t);\n                    }\n                });\n            } else {\n                if (examine.optional === t.id) {\n                    preReqs.push(t);\n                }\n            }\n        });\n    }\n    \n    return preReqs;\n};\n\n// Get a list of the displayed things this technology leads to that optionally require it\nexport function getLeadsToOpt(examine, compareData) {\n    var leads = [];\n    \n    compareData.forEach(function (c) {\n        if (c.optional) {\n            if (Array.isArray(c.optional)) {\n                c.optional.forEach(function (o) {\n                    if (o === examine.id) {\n                        leads.push(c);\n                    }\n                });\n            } else {\n                if (c.optional === examine.id) {\n                    leads.push(c);\n                }\n            }\n        }\n    });\n    \n    return leads;\n};\n\n// Get a list of the technology prerequsites (required and optional) for a given thing (techs, units, whatever)\nexport function getTechPrereqs(examine, data) {\n    var preReqs = [];\n\n    if (examine.requires) {\n        data.technologies.forEach(function (t) {\n            if (Array.isArray(examine.requires)) {\n                examine.requires.forEach(function (r) {\n                    if (r === t.id) {\n                        preReqs.push(t);\n                    }\n                });\n            } else {\n                if (examine.requires === t.id) {\n                    preReqs.push(t);\n                }\n            }\n        });\n    }\n    if (examine.optional) {\n        data.technologies.forEach(function (t) {\n            if (Array.isArray(examine.optional)) {\n                examine.optional.forEach(function (o) {\n                    if (o === t.id) {\n                        preReqs.push(t);\n                    }\n                });\n            } else {\n                if (examine.optional === t.id) {\n                    preReqs.push(t);\n                }\n            }\n        });\n    }\n    \n    return preReqs;\n};\n\n// Get a list of the displayed things this technology leads to (required and optional)\nexport function getLeadsTo(examine, compareData) {\n    var leads = [];\n    \n    compareData.forEach(function (c) {\n        if (c.requires) {\n            if (Array.isArray(c.requires)) {\n                c.requires.forEach(function (r) {\n                    if (r === examine.id) {\n                        leads.push(c);\n                    }\n                });\n            } else {\n                if (c.requires === examine.id) {\n                    leads.push(c);\n                }\n            }\n        }\n        if (c.optional) {\n            if (Array.isArray(c.optional)) {\n                c.optional.forEach(function (o) {\n                    if (o === examine.id) {\n                        leads.push(c);\n                    }\n                });\n            } else {\n                if (c.optional === examine.id) {\n                    leads.push(c);\n                }\n            }\n\n        }\n    });\n\n    return leads;\n};\n\n// Returns a technology item by its Id\nexport function getTechById(examineId, data) {\n    var tech = \"BAD_ID\";\n\n    data.technologies.forEach(function (t) {\n        if (t.id === examineId) {\n            tech = t;\n        }\n    });\n\n    return tech;\n};\n\n// For a given technology, creates a list including:\n// technologies that it requires (optional & mandatory)\n// technologies it leads to\n// anything else it leads to and the other technologies they require\nexport function findNearby(origin, data) {\n    var nearbyList;\n    var fartherList = [];\n    var obsoleteTech;\n    var otherReqs;\n\n    nearbyList = getTechPrereqs(origin, data);\n    nearbyList = nearbyList.concat(convertSpecial(origin));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.technologies));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.promotions));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.projects));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.build));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.buildings));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.civics));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.religions));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.resources));\n    nearbyList = nearbyList.concat(getLeadsTo(origin, data.units));\n\n    nearbyList.forEach(function (n) {\n        otherReqs = getTechPrereqs(n, data);\n\n        otherReqs.forEach(function (o) {\n            if (o.id !== origin.id) {\n                fartherList.push(o);\n            }\n        });\n    });\n\n    nearbyList = nearbyList.concat(fartherList);\n    nearbyList.push(origin);\n\n    if (origin.obsolete) {\n        obsoleteTech = getTechById(origin.obsolete, data);\n        nearbyList.push(obsoleteTech);\n    }\n\n    return nearbyList;\n};\n\n// Converts the specials in a technology into prereq objects\nexport function convertSpecial(examine) {\n    let specials = [];\n\n    if (examine.special) {\n        examine.special.forEach(function (s) {\n            s.requires = [];\n            s.requires.push(examine.id);\n            s.cat = 'specials';\n            specials.push(s);\n        });\n    }\n\n    return specials;\n};"]},"metadata":{},"sourceType":"module"}