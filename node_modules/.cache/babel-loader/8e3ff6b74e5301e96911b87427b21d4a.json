{"ast":null,"code":"import _slicedToArray from \"/Users/pcclarke/Documents/GitHub/civ-techs/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Wheel.js\";\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Modal from '@material-ui/core/Modal';\nimport { getLeadsTo, getTechPrereqs } from '../libs/dataTools.js';\nimport { scaleOrdinal as d3_scaleOrdinal } from 'd3-scale';\nimport { arc as d3_arc } from 'd3-shape';\nimport { schemeCategory10 as d3_schemeCategory10 } from 'd3-scale-chromatic';\nimport startSlice from '../img/startSlice.png';\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n  return {\n    top: \"\".concat(top, \"%\"),\n    left: \"\".concat(left, \"%\"),\n    transform: \"translate(-\".concat(top, \"%, -\").concat(left, \"%)\")\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(4),\n    outline: 'none'\n  }\n}));\n\nfunction Wheel(props) {\n  const angleShift = props.angleShift,\n        arcBase = props.arcBase,\n        arcSpace = props.arcSpace,\n        arcWidth = props.arcWidth,\n        data = props.data,\n        empire = props.empire,\n        game = props.game,\n        width = props.width,\n        height = props.height,\n        margin = props.margin;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        notFaded = _useState2[0],\n        setNotFaded = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        tempArcs = _useState4[0],\n        setTempArcs = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        notUnlockFaded = _useState6[0],\n        setNotUnlockFaded = _useState6[1];\n\n  const _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        displayModal = _React$useState2[0],\n        setDisplayModal = _React$useState2[1];\n\n  const _React$useState3 = React.useState({}),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        modalInfo = _React$useState4[0],\n        setModalInfo = _React$useState4[1];\n\n  const color = d3_scaleOrdinal(d3_schemeCategory10);\n  const arc = d3_arc().innerRadius(d => arcBase + arcSpace * d.arcRank).outerRadius(d => arcBase + arcWidth + arcSpace * d.arcRank).startAngle(d => -1 * d.arcBack).endAngle(d => d.arcDist);\n  const unlockArc = d3_arc().innerRadius(d => arcBase + 342.5 + 14 * d.rank).outerRadius(d => arcBase + 342.6 + arcWidth + 14 * d.rank).startAngle(d => -1 * d.arcBack).endAngle(d => d.arcEnd);\n\n  const updateDataFade = d => {\n    let minRank = 50;\n    let updateNotFaded = getTechPrereqs(d, data);\n    let updateTempArcs = updateNotFaded.map(n => {\n      let tempDist;\n      let tempBack;\n\n      if (d.pos > n.pos) {\n        tempDist = (d.pos - n.pos) * (2 * Math.PI / data.displayed.length);\n        tempBack = 0;\n      } else if (d.pos < n.pos) {\n        tempDist = 0;\n        tempBack = (d.pos - n.pos) * (2 * Math.PI / data.displayed.length);\n      } else if (d.pos === n.pos) {\n        tempDist = n.arcDist;\n        tempBack = n.arcBack;\n      }\n\n      let lopt = [];\n\n      if (n.id === d.id) {\n        lopt = d.lopt;\n      } else {\n        n.lopt.forEach(o => {\n          if (o.id === d.id) {\n            lopt.push(o);\n          }\n        });\n      }\n\n      let lreq = [];\n\n      if (n.id === d.id) {\n        lreq = d.lreq;\n      } else {\n        n.lreq.forEach(r => {\n          if (r.id === d.id) {\n            lreq.push(r);\n          }\n        });\n      }\n\n      let spokeRank = 50;\n\n      if (d.pos === n.pos) {\n        spokeRank = minRank;\n      } else {\n        lopt.forEach(o => {\n          if (o.arcRank < spokeRank) {\n            spokeRank = o.arcRank;\n          }\n        });\n        lreq.forEach(r => {\n          if (r.arcRank < spokeRank) {\n            spokeRank = r.arcRank;\n          }\n        });\n      }\n\n      if (spokeRank < minRank) {\n        minRank = spokeRank;\n      }\n\n      return {\n        arcBack: tempBack,\n        arcDist: tempDist,\n        arcRank: n.arcRank,\n        id: n.id,\n        lopt: lopt,\n        lreq: lreq,\n        pos: n.pos,\n        spokeRank: spokeRank,\n        unlocks: n.unlocks\n      };\n    });\n    updateNotFaded = updateNotFaded.concat(d);\n    updateNotFaded = updateNotFaded.concat(getLeadsTo(d, data.displayed));\n    updateTempArcs.push(d);\n    getLeadsTo(d, data.displayed).forEach(l => {\n      updateTempArcs.push({\n        arcBack: 0,\n        arcDist: 0,\n        arcRank: 0,\n        id: l.id,\n        lopt: [],\n        lreq: [],\n        pos: l.pos,\n        spokeRank: d.arcRank,\n        unlocks: l.unlocks\n      });\n    });\n    setNotFaded(updateNotFaded);\n    setTempArcs(updateTempArcs);\n  };\n\n  const setFade = d => {\n    if (notFaded.length > 0) {\n      const notFadedIds = notFaded.map(n => n.id);\n\n      if (notFadedIds.indexOf(d.id) < 0) {\n        return 'fade';\n      }\n    }\n\n    return '';\n  };\n\n  const updateUnlockFade = u => {\n    if (u) {\n      setNotUnlockFaded(u);\n    } else {\n      setNotUnlockFaded(null);\n    }\n  };\n\n  const setUnlockFade = u => {\n    if (notUnlockFaded) {\n      return u === notUnlockFaded ? '' : 'fade';\n    }\n  };\n\n  const _React$useState5 = React.useState(getModalStyle),\n        _React$useState6 = _slicedToArray(_React$useState5, 1),\n        modalStyle = _React$useState6[0];\n\n  const classes = useStyles();\n\n  function displayUnlockModal(unlock) {\n    console.log(unlock);\n\n    if (unlock.ref.name) {\n      setModalInfo({\n        title: unlock.ref.name\n      });\n    } else {\n      setModalInfo({\n        title: unlock.ref[empire].name\n      });\n    }\n\n    setDisplayModal(true);\n    console.log(modalInfo);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    width: width + margin.left + margin.right,\n    height: height + margin.top + margin.bottom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    className: \"civTechs\",\n    transform: \"translate(\".concat(margin.left, \", \").concat(margin.top, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    className: \"wheel\",\n    transform: \"translate(\".concat(width / 2, \", \").concat(height / 2, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, React.createElement(\"image\", {\n    id: \"startSlice\",\n    x: 0,\n    y: -(height / 2),\n    width: 167,\n    height: height / 2,\n    xlinkHref: startSlice,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }), notFaded.length > 0 && tempArcs.length > 0 && React.createElement(\"g\", {\n    className: \"tempArcs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }, tempArcs.map((t, i) => React.createElement(\"g\", {\n    className: \"temp-spokes\",\n    key: \"temp-spokes-\".concat(i),\n    transform: \"rotate(\".concat(t.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, React.createElement(\"line\", {\n    className: \"spokeLine\",\n    x1: 0,\n    y1: -(arcBase + arcSpace * t.spokeRank),\n    x2: 0,\n    y2: -(width / 2) + 160 - t.unlocks.length * 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }))), tempArcs.filter(t => t.lopt.length > 0 || t.lreq.length > 0).map((t, i) => React.createElement(\"g\", {\n    className: \"tempGroup\",\n    key: \"temp-arcs-\".concat(i),\n    transform: \"rotate(\".concat(t.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    className: \"tempArc\",\n    d: arc(t),\n    fill: color(t.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260\n    },\n    __self: this\n  }), React.createElement(\"line\", {\n    className: \"tempSpokePin\",\n    x1: 0,\n    y1: -(arcBase + 7 + arcSpace * t.arcRank),\n    x2: 0,\n    y2: -(arcBase - 5 + arcSpace * t.arcRank),\n    strokeWidth: arcWidth,\n    stroke: color(t.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265\n    },\n    __self: this\n  }), t.lreq.map((r, j) => React.createElement(\"g\", {\n    className: \"tempReqSquare\",\n    key: \"req-square-\".concat(j),\n    transform: (() => {\n      const ang = r.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * r.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(r.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283\n    },\n    __self: this\n  }))), t.lopt.map((o, j) => React.createElement(\"g\", {\n    className: \"optCircle\",\n    key: \"opt-circle-\".concat(j),\n    transform: (() => {\n      const ang = o.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * o.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293\n    },\n    __self: this\n  }, React.createElement(\"circle\", {\n    cx: 0,\n    cy: 2,\n    r: 2.5,\n    strokeWidth: 1,\n    stroke: color(o.pos),\n    fill: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  })))))), React.createElement(\"g\", {\n    className: \"spokeAll\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316\n    },\n    __self: this\n  }, data.displayed.map((d, i) => React.createElement(\"g\", {\n    className: \"\".concat(d.id, \" spoke\"),\n    key: \"spoke-\".concat(i),\n    transform: \"rotate(\".concat(d.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319\n    },\n    __self: this\n  }, React.createElement(\"line\", {\n    className: \"spokeLine \".concat(notFaded.length > 0 ? 'fade' : ''),\n    x1: 0,\n    y1: !d.requires && !d.optional ? 0 : -(arcBase + arcSpace * d.spokeRank),\n    x2: 0,\n    y2: -(width / 2) + 160 - d.unlocks.length * 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }), React.createElement(\"image\", {\n    className: \"techImg \".concat(setFade(d)),\n    height: 25,\n    onMouseLeave: () => setNotFaded([]),\n    onMouseOver: () => updateDataFade(d),\n    transform: (() => d.pos > data.displayed.length / 2 ? \"translate(10, \".concat(-(width / 2) + 157, \") rotate(90)\") : \"translate(-10, \".concat(-(width / 2) + 182, \") rotate(270)\"))(),\n    width: 25,\n    xlinkHref: \"/\".concat(game, \"/\").concat(d.cat, \"/\").concat(d.id, \".png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331\n    },\n    __self: this\n  }), d.unlocks.map((u, j) => React.createElement(\"g\", {\n    key: \"unlock-\".concat(j),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343\n    },\n    __self: this\n  }, u.lreq && React.createElement(\"g\", {\n    className: \"unlock \".concat(notUnlockFaded === u.ref.id ? '' : 'opaque', \" \").concat(u.ref.id).concat(u.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    className: \"unlockArc\",\n    rank: u.rank,\n    fill: color(u.pos),\n    d: unlockArc(u),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346\n    },\n    __self: this\n  }), u.lreq.map((l, k) => React.createElement(\"g\", {\n    className: \"unlockSquare\",\n    key: \"unlock-square-\".concat(k),\n    transform: \"rotate(\".concat(l.dist * (360 / data.displayed.length), \") translate(0, \").concat(-(width / 2) + 145 - 14 * l.arcRank, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(l.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358\n    },\n    __self: this\n  })))), React.createElement(\"image\", {\n    className: \"unlockIcon \".concat(setFade(d), \" \").concat(setUnlockFade(u.ref.id)),\n    height: 13,\n    onClick: () => {\n      console.log(d);\n      displayUnlockModal(u);\n    },\n    onMouseLeave: () => updateUnlockFade(),\n    onMouseOver: () => updateUnlockFade(u.ref.id),\n    transform: (() => u.pos > data.displayed.length / 2 ? \"translate(6, \".concat(-(width / 2) + (142 - 14 * u.rank), \") rotate(90)\") : \"translate(-6, \".concat(-(width / 2) + (153 - 14 * u.rank), \") rotate(270)\"))(),\n    width: 13,\n    xlinkHref: (() => {\n      let link;\n\n      if ((u.ref.cat === 'units' || u.ref.cat === 'buildings') && !(game === 'civ1' || game === 'civ2')) {\n        if (u.ref[empire]) {\n          link = \"\".concat(game, \"/\").concat(u.ref.cat, \"/\").concat(u.ref[empire].id, \".png\");\n        } else {\n          link = \"\".concat(game, \"/\").concat(u.ref.cat, \"/\").concat(u.ref.CIVILIZATION_ALL.id, \".png\");\n        }\n      } else {\n        link = \"\".concat(game, \"/\").concat(u.ref.cat, \"/\").concat(u.ref.id, \".png\");\n      }\n\n      return link;\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369\n    },\n    __self: this\n  })))))), React.createElement(\"g\", {\n    className: \"reqArcs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405\n    },\n    __self: this\n  }, data.displayed.map((d, i) => React.createElement(\"g\", {\n    className: \"\".concat(d.id, \" reqGroup \").concat(notFaded.length > 0 ? 'fade' : ''),\n    key: \"req-arcs-\".concat(i),\n    transform: \"rotate(\".concat(d.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    className: \"spokeArc\",\n    d: arc(d),\n    fill: color(d.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412\n    },\n    __self: this\n  }), React.createElement(\"line\", {\n    className: \"spokePin\",\n    x1: 0,\n    y1: -(arcBase + 7 + arcSpace * d.arcRank),\n    x2: 0,\n    y2: -(arcBase - 5 + arcSpace * d.arcRank),\n    strokeWidth: arcWidth,\n    stroke: color(d.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417\n    },\n    __self: this\n  }), d.lreq.map((r, j) => React.createElement(\"g\", {\n    className: \"reqSquare\",\n    key: \"req-square-\".concat(j),\n    transform: (() => {\n      const ang = r.dist * (360 / data.displayed.length);\n\n      if (d.id === 'TECH_FISHING') {}\n\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * r.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(r.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438\n    },\n    __self: this\n  }))), d.lopt.map((o, j) => React.createElement(\"g\", {\n    className: \"optCircle\",\n    key: \"opt-circle-\".concat(j),\n    transform: (() => {\n      const ang = o.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * o.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448\n    },\n    __self: this\n  }, React.createElement(\"circle\", {\n    cx: 0,\n    cy: 2,\n    r: 2.5,\n    strokeWidth: 1,\n    stroke: color(o.pos),\n    fill: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456\n    },\n    __self: this\n  })))))), React.createElement(\"image\", {\n    x: -75,\n    y: -75,\n    width: 150,\n    height: 150,\n    xlinkHref: \"\".concat(game, \"/\").concat(game, \"-center.png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  })))), React.createElement(Modal, {\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: displayModal,\n    onClose: () => setDisplayModal(false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h6\",\n    id: \"modal-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488\n    },\n    __self: this\n  }, modalInfo.title), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    id: \"simple-modal-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491\n    },\n    __self: this\n  }, \"Duis mollis, est non commodo luctus, nisi erat porttitor ligula.\"))));\n}\n\nexport default Wheel;","map":{"version":3,"sources":["/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Wheel.js"],"names":["React","useState","makeStyles","Typography","Modal","getLeadsTo","getTechPrereqs","scaleOrdinal","d3_scaleOrdinal","arc","d3_arc","schemeCategory10","d3_schemeCategory10","startSlice","rand","Math","round","random","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","outline","Wheel","props","angleShift","arcBase","arcSpace","arcWidth","data","empire","game","height","margin","notFaded","setNotFaded","tempArcs","setTempArcs","notUnlockFaded","setNotUnlockFaded","displayModal","setDisplayModal","modalInfo","setModalInfo","color","innerRadius","d","arcRank","outerRadius","startAngle","arcBack","endAngle","arcDist","unlockArc","rank","arcEnd","updateDataFade","minRank","updateNotFaded","updateTempArcs","map","n","tempDist","tempBack","pos","PI","displayed","length","lopt","id","forEach","o","push","lreq","r","spokeRank","unlocks","concat","l","setFade","notFadedIds","indexOf","updateUnlockFade","u","setUnlockFade","modalStyle","classes","displayUnlockModal","unlock","console","log","ref","name","title","right","bottom","t","i","filter","j","ang","dist","requires","optional","cat","k","link","CIVILIZATION_ALL"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\n\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Modal from '@material-ui/core/Modal';\n\nimport {getLeadsTo, getTechPrereqs} from '../libs/dataTools.js';\n\nimport {scaleOrdinal as d3_scaleOrdinal} from 'd3-scale';\nimport {arc as d3_arc} from 'd3-shape';\nimport {schemeCategory10 as d3_schemeCategory10} from 'd3-scale-chromatic';\n\nimport startSlice from '../img/startSlice.png';\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(4),\n    outline: 'none',\n  },\n}));\n\nfunction Wheel(props) {\n  const {\n    angleShift,\n    arcBase,\n    arcSpace,\n    arcWidth,\n    data,\n    empire,\n    game,\n    width,\n    height,\n    margin,\n  } = props;\n\n  const [notFaded, setNotFaded] = useState([]);\n  const [tempArcs, setTempArcs] = useState([]);\n  const [notUnlockFaded, setNotUnlockFaded] = useState(null);\n  const [displayModal, setDisplayModal] = React.useState(false);\n  const [modalInfo, setModalInfo] = React.useState({});\n\n  const color = d3_scaleOrdinal(d3_schemeCategory10);\n\n  const arc = d3_arc()\n    .innerRadius((d) => arcBase + (arcSpace * d.arcRank))\n    .outerRadius((d) => (arcBase + arcWidth) + (arcSpace * d.arcRank))\n    .startAngle((d) => -1 * d.arcBack)\n    .endAngle((d) => d.arcDist);\n\n  const unlockArc = d3_arc()\n    .innerRadius((d) => arcBase + 342.5 + (14 * d.rank))\n    .outerRadius((d) => (arcBase + 342.6 + arcWidth) + (14 * d.rank))\n    .startAngle((d) => -1 * d.arcBack)\n    .endAngle((d) => d.arcEnd);\n\n  const updateDataFade = (d) => {\n    let minRank = 50;\n    let updateNotFaded = getTechPrereqs(d, data);\n\n    let updateTempArcs = updateNotFaded.map((n) => {\n      let tempDist;\n      let tempBack;\n      if (d.pos > n.pos) {\n        tempDist = (d.pos - n.pos) * ((2 * Math.PI) / data.displayed.length);\n        tempBack = 0;\n      } else if (d.pos < n.pos) {\n        tempDist = 0;\n        tempBack = (d.pos - n.pos) * ((2 * Math.PI) / data.displayed.length);\n      } else if (d.pos === n.pos) {\n        tempDist = n.arcDist;\n        tempBack = n.arcBack;\n      }\n\n      let lopt = [];\n      if (n.id === d.id) {\n        lopt = d.lopt;\n      } else {\n        n.lopt.forEach((o) => {\n          if (o.id === d.id) {\n            lopt.push(o);\n          }\n        });\n      }\n\n      let lreq = [];\n      if (n.id === d.id) {\n        lreq = d.lreq;\n      } else {\n        n.lreq.forEach((r) => {\n          if (r.id === d.id) {\n            lreq.push(r);\n          }\n        });\n      }\n\n      let spokeRank = 50;\n\n      if (d.pos === n.pos) {\n        spokeRank = minRank;\n      } else {\n        lopt.forEach((o) => {\n          if (o.arcRank < spokeRank) {\n            spokeRank = o.arcRank;\n          }\n        });\n        lreq.forEach((r) => {\n          if (r.arcRank < spokeRank) {\n            spokeRank = r.arcRank;\n          }\n        });\n      }\n      if (spokeRank < minRank) {\n        minRank = spokeRank;\n      }\n\n      return {\n        arcBack: tempBack,\n        arcDist: tempDist,\n        arcRank: n.arcRank,\n        id: n.id,\n        lopt: lopt,\n        lreq: lreq,\n        pos: n.pos,\n        spokeRank: spokeRank,\n        unlocks: n.unlocks,\n      };\n    });\n    updateNotFaded = updateNotFaded.concat(d);\n    updateNotFaded = updateNotFaded.concat(getLeadsTo(d, data.displayed));\n\n    updateTempArcs.push(d);\n    getLeadsTo(d, data.displayed).forEach((l) => {\n      updateTempArcs.push({\n        arcBack: 0,\n        arcDist: 0,\n        arcRank: 0,\n        id: l.id,\n        lopt: [],\n        lreq: [],\n        pos: l.pos,\n        spokeRank: d.arcRank,\n        unlocks: l.unlocks,\n      });\n    });\n\n    setNotFaded(updateNotFaded);\n    setTempArcs(updateTempArcs);\n  };\n\n  const setFade = (d) => {\n    if (notFaded.length > 0) {\n      const notFadedIds = notFaded.map((n) => n.id);\n\n      if (notFadedIds.indexOf(d.id) < 0) {\n        return 'fade';\n      }\n    }\n\n    return '';\n  }\n\n  const updateUnlockFade = (u) => {\n    if (u) {\n      setNotUnlockFaded(u);\n    } else {\n      setNotUnlockFaded(null);\n    }\n  }\n\n  const setUnlockFade = (u) => {\n    if (notUnlockFaded) {\n      return (u === notUnlockFaded) ? '' : 'fade';\n    }\n  }\n\n  const [modalStyle] = React.useState(getModalStyle);\n\n  const classes = useStyles();\n\n  function displayUnlockModal(unlock) {\n    console.log(unlock);\n    if (unlock.ref.name) {\n      setModalInfo({\n        title: unlock.ref.name,\n      });\n    } else {\n      setModalInfo({\n        title: unlock.ref[empire].name,\n      });\n    }\n\n    setDisplayModal(true);\n    console.log(modalInfo);\n  }\n\n  return (\n    <div>\n      <svg\n        width={width + margin.left + margin.right}\n        height={height + margin.top + margin.bottom}\n      >\n        <g\n          className='civTechs'\n          transform={`translate(${margin.left}, ${margin.top})`}\n        >\n          <g\n            className='wheel'\n            transform={`translate(${width / 2}, ${height / 2})`}\n          >\n            <image\n              id='startSlice'\n              x={0}\n              y={-(height/2)}\n              width={167}\n              height={height/2}\n              xlinkHref={startSlice}\n            />\n            {(notFaded.length > 0 && tempArcs.length > 0) &&\n              <g className='tempArcs'>\n                {tempArcs.map((t, i) => (\n                  <g\n                    className='temp-spokes'\n                    key={`temp-spokes-${i}`}\n                    transform={`rotate(${t.pos * (360 / data.displayed.length) + angleShift})`}\n                  >\n                    <line\n                      className='spokeLine'\n                      x1={0}\n                      y1={-(arcBase + (arcSpace * t.spokeRank))}\n                      x2={0}\n                      y2={-(width / 2) + 160 - (t.unlocks.length * 14)}\n                    />\n                  </g>\n                ))}\n                {tempArcs.filter((t) => t.lopt.length > 0 || t.lreq.length > 0).map((t, i) => (\n                  <g\n                    className='tempGroup'\n                    key={`temp-arcs-${i}`}\n                    transform={`rotate(${t.pos * (360 / data.displayed.length) + angleShift})`}\n                  >\n                    <path\n                      className='tempArc'\n                      d={arc(t)}\n                      fill={color(t.pos)}\n                    />\n                    <line\n                      className='tempSpokePin'\n                      x1={0}\n                      y1={-(arcBase + 7 + (arcSpace * t.arcRank))}\n                      x2={0}\n                      y2={-(arcBase - 5 + (arcSpace * t.arcRank))}\n                      strokeWidth={arcWidth}\n                      stroke={color(t.pos)}\n                    />\n                   {t.lreq.map((r, j) => (\n                      <g\n                        className='tempReqSquare'\n                        key={`req-square-${j}`}\n                        transform={(() => {\n                          const ang = r.dist * (360 / data.displayed.length);\n                          return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * r.arcRank))})`;\n                        })()}\n                      >\n                        <rect\n                          x={-2.5}\n                          y={-0.75}\n                          width={5}\n                          height={5}\n                          fill={color(r.pos)}\n                        />\n                      </g>\n                    ))}\n                    {t.lopt.map((o, j) => (\n                      <g\n                        className='optCircle'\n                        key={`opt-circle-${j}`}\n                        transform={(() => {\n                          const ang = o.dist * (360 / data.displayed.length);\n                          return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * o.arcRank))})`;\n                        })()}\n                      >\n                        <circle\n                          cx={0}\n                          cy={2}\n                          r={2.5}\n                          strokeWidth={1}\n                          stroke={color(o.pos)}\n                          fill='white'\n                        />\n                      </g>\n                    ))}\n                  </g>\n                ))}\n              </g>\n            }\n\n            <g className='spokeAll'>\n              {\n                data.displayed.map((d, i) => (\n                  <g\n                    className={`${d.id} spoke`}\n                    key={`spoke-${i}`}\n                    transform={`rotate(${d.pos * (360 / data.displayed.length) + angleShift})`}\n                  >\n                    <line\n                      className={`spokeLine ${(notFaded.length > 0) ? 'fade' : ''}`}\n                      x1={0}\n                      y1={(!d.requires && !d.optional) ? 0 : -(arcBase + (arcSpace * d.spokeRank))}\n                      x2={0}\n                      y2={-(width / 2) + 160 - (d.unlocks.length * 14)}\n                    />\n                    <image\n                      className={`techImg ${setFade(d)}`}\n                      height={25}\n                      onMouseLeave={() => setNotFaded([])}\n                      onMouseOver={() => updateDataFade(d)}\n                      transform={(() => (d.pos > (data.displayed.length / 2)) ?\n                        `translate(10, ${(-(width / 2) + 157)}) rotate(90)` :\n                        `translate(-10, ${(-(width / 2) + 182)}) rotate(270)`)()}\n                      width={25}\n                      xlinkHref={`/${game}/${d.cat}/${d.id}.png`}\n                    />\n                    {d.unlocks.map((u, j) => (\n                      <g key={`unlock-${j}`}>\n                        {u.lreq &&\n                          <g className={`unlock ${(notUnlockFaded === u.ref.id) ? '' : 'opaque'} ${u.ref.id}${u.pos}`}>\n                            <path\n                              className='unlockArc'\n                              rank={u.rank}\n                              fill={color(u.pos)}\n                              d={unlockArc(u)}\n                            />\n                            {u.lreq.map((l, k) => (\n                              <g\n                                className='unlockSquare'\n                                key={`unlock-square-${k}`}\n                                transform={`rotate(${l.dist * (360 / data.displayed.length)}) translate(0, ${(-(width/2) + 145 - (14 * l.arcRank))})`}\n                              >\n                                <rect\n                                  x={-2.5}\n                                  y={-0.75}\n                                  width={5}\n                                  height={5}\n                                  fill={color(l.pos)}\n                                />\n                              </g>\n                            ))}\n                          </g>\n                        }\n                        <image\n                          className={`unlockIcon ${setFade(d)} ${setUnlockFade(u.ref.id)}`}\n                          height={13}\n                          onClick={() => {\n                            console.log(d);\n                            displayUnlockModal(u);\n                          }}\n                          onMouseLeave={() => updateUnlockFade()}\n                          onMouseOver={() => updateUnlockFade(u.ref.id)}\n                          transform={(() => (u.pos > (data.displayed.length / 2)) ?\n                            `translate(6, ${(-(width / 2) + (142 - (14 * u.rank)))}) rotate(90)` :\n                            `translate(-6, ${(-(width / 2) + (153 - (14 * u.rank)))}) rotate(270)`)()}\n                          width={13}\n                          xlinkHref={(() => {\n                            let link;\n                            if ((u.ref.cat === 'units' || u.ref.cat === 'buildings') &&\n                                !(game === 'civ1' || game === 'civ2')) {\n                                if (u.ref[empire]) {\n                                    link = `${game}/${u.ref.cat}/${u.ref[empire].id}.png`;\n                                } else {\n                                    link = `${game}/${u.ref.cat}/${u.ref.CIVILIZATION_ALL.id}.png`;\n                                }\n                            } else {\n                                link = `${game}/${u.ref.cat}/${u.ref.id}.png`;\n                            }\n\n                            return link;\n                          })()}\n                        />\n                      </g>\n                    ))}\n                  </g>\n                ))\n              }\n            </g>\n\n            <g className='reqArcs'>\n              {data.displayed.map((d, i) => (\n                <g\n                  className={`${d.id} reqGroup ${(notFaded.length > 0) ? 'fade' : ''}`}\n                  key={`req-arcs-${i}`}\n                  transform={`rotate(${d.pos * (360 / data.displayed.length) + angleShift})`}\n                >\n                  <path\n                    className='spokeArc'\n                    d={arc(d)}\n                    fill={color(d.pos)}\n                  />\n                  <line\n                    className='spokePin'\n                    x1={0}\n                    y1={-(arcBase + 7 + (arcSpace * d.arcRank))}\n                    x2={0}\n                    y2={-(arcBase - 5 + (arcSpace * d.arcRank))}\n                    strokeWidth={arcWidth}\n                    stroke={color(d.pos)}\n                  />\n                  {d.lreq.map((r, j) => (\n                    <g\n                      className='reqSquare'\n                      key={`req-square-${j}`}\n                      transform={(() => {\n\n                        const ang = r.dist * (360 / data.displayed.length);\n                        if (d.id === 'TECH_FISHING') {\n                        }\n                        return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * r.arcRank))})`;\n                      })()}\n                    >\n                      <rect\n                        x={-2.5}\n                        y={-0.75}\n                        width={5}\n                        height={5}\n                        fill={color(r.pos)}\n                      />\n                    </g>\n                  ))}\n                  {d.lopt.map((o, j) => (\n                    <g\n                      className='optCircle'\n                      key={`opt-circle-${j}`}\n                      transform={(() => {\n                        const ang = o.dist * (360 / data.displayed.length);\n                        return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * o.arcRank))})`;\n                      })()}\n                    >\n                      <circle\n                        cx={0}\n                        cy={2}\n                        r={2.5}\n                        strokeWidth={1}\n                        stroke={color(o.pos)}\n                        fill='white'\n                      />\n                    </g>\n                  ))}\n                </g>\n              ))}\n            </g>\n\n            <image\n              x={-75}\n              y={-75}\n              width={150}\n              height={150}\n              xlinkHref={`${game}/${game}-center.png`}\n            />\n          </g>\n        </g>\n      </svg>\n\n      <Modal\n        aria-labelledby='simple-modal-title'\n        aria-describedby='simple-modal-description'\n        open={displayModal}\n        onClose={() => setDisplayModal(false)}\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <Typography variant='h6' id='modal-title'>\n            {modalInfo.title}\n          </Typography>\n          <Typography variant='subtitle1' id='simple-modal-description'>\n            Duis mollis, est non commodo luctus, nisi erat porttitor ligula.\n          </Typography>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default Wheel;\n"]},"metadata":{},"sourceType":"module"}