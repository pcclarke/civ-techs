{"ast":null,"code":"var _jsxFileName = \"/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Civ4.js\";\nimport React, { useState } from 'react';\nimport { cloneDeep } from 'lodash';\nimport civ4Data from '../data/civ4.json';\n\nfunction setupData(data, installment, types) {\n  let sortedData = cloneDeep(data);\n  let displayed = [];\n  let unlocksList = []; // First, arrange the technologies by cost\n\n  if (installment > 3) {\n    sortedData.technologies.sort((a, b) => b.cost - a.cost);\n  } // Scoop up all the things each technology leads to and put it in the unlocks object\n\n\n  sortedData.technologies.forEach(d => {\n    let toSplice = [];\n    let uniqueUnlocks = [];\n    let unlocks;\n    d.cat = 'technologies';\n    displayed.push(d);\n    unlocks = getLeadsTo(d, sortedData.units);\n    unlocks = unlocks.concat(getLeadsTo(d, sortedData.buildings));\n    unlocks = unlocks.concat(getLeadsTo(d, sortedData.build));\n\n    if (sortedData.civics) {\n      unlocks = unlocks.concat(getLeadsTo(d, sortedData.civics));\n    }\n\n    if (sortedData.projects) {\n      unlocks = unlocks.concat(getLeadsTo(d, sortedData.projects));\n    }\n\n    if (sortedData.promotions) {\n      unlocks = unlocks.concat(getLeadsTo(d, sortedData.promotions));\n    }\n\n    if (sortedData.religions) {\n      unlocks = unlocks.concat(getLeadsTo(d, sortedData.religions));\n    }\n\n    if (sortedData.resources) {\n      unlocks = unlocks.concat(getLeadsTo(d, sortedData.resources));\n    }\n\n    if (d.special) {\n      d.special.forEach(function (s) {\n        s.cat = 'specials';\n        s.requires = [];\n        s.requires.push(d.id);\n        unlocks.push(s);\n      });\n    }\n\n    unlocks.forEach(function (u, j) {\n      let matchFound = 0;\n      unlocksList.forEach(function (l, k) {\n        if (u.id === l.id) {\n          matchFound = 1;\n        }\n      });\n\n      if (matchFound !== 1) {\n        uniqueUnlocks.push(u);\n      }\n    });\n    unlocksList = unlocksList.concat(uniqueUnlocks);\n    let unlocksHandler = [];\n    uniqueUnlocks.forEach(function (u, j) {\n      let unlocksItem = {};\n      unlocksItem.rank = j;\n      unlocksItem.ref = u;\n      unlocksHandler.push(unlocksItem);\n    });\n    d.unlocks = unlocksHandler;\n  }); // Label data categories\n\n  types.forEach(function (t) {\n    if (data[t]) {\n      data[t].forEach(function (d) {\n        d.cat = t;\n      });\n    }\n  });\n  return sortedData;\n}\n\nfunction Civ4(props) {\n  const dataTypes = props.dataTypes,\n        installment = props.installment,\n        width = props.width,\n        height = props.height,\n        margin = props.margin;\n  console.log(civ4Data);\n  const orderedData = setupData(civ4Data, installment, dataTypes);\n  console.log(orderedData);\n  return React.createElement(\"svg\", {\n    width: width + margin.left + margin.right,\n    height: height + margin.top + margin.bottom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    transform: \"translate(\".concat(margin.left, \", \").concat(margin.top, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }));\n}\n\nexport default Civ4;","map":{"version":3,"sources":["/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Civ4.js"],"names":["React","useState","cloneDeep","civ4Data","setupData","data","installment","types","sortedData","displayed","unlocksList","technologies","sort","a","b","cost","forEach","d","toSplice","uniqueUnlocks","unlocks","cat","push","getLeadsTo","units","concat","buildings","build","civics","projects","promotions","religions","resources","special","s","requires","id","u","j","matchFound","l","k","unlocksHandler","unlocksItem","rank","ref","t","Civ4","props","dataTypes","width","height","margin","console","log","orderedData","left","right","top","bottom"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {cloneDeep} from 'lodash';\n\nimport civ4Data from '../data/civ4.json';\n\nfunction setupData(data, installment, types) {\n  let sortedData = cloneDeep(data);\n  let displayed = [];\n  let unlocksList = [];\n\n  // First, arrange the technologies by cost\n  if (installment > 3) {\n    sortedData.technologies.sort((a, b) => b.cost - a.cost);\n  }\n\n  // Scoop up all the things each technology leads to and put it in the unlocks object\n  sortedData.technologies.forEach((d) => {\n    let toSplice = [];\n    let uniqueUnlocks = [];\n    let unlocks;\n\n    d.cat = 'technologies';\n    displayed.push(d);\n\n    unlocks = getLeadsTo(d, sortedData.units);\n    unlocks = unlocks.concat(getLeadsTo(d, sortedData.buildings));\n    unlocks = unlocks.concat(getLeadsTo(d, sortedData.build));\n    if (sortedData.civics) {\n        unlocks = unlocks.concat(getLeadsTo(d, sortedData.civics));\n    }\n    if (sortedData.projects) {\n        unlocks = unlocks.concat(getLeadsTo(d, sortedData.projects));\n    }\n    if (sortedData.promotions) {\n        unlocks = unlocks.concat(getLeadsTo(d, sortedData.promotions));\n    }\n    if (sortedData.religions) {\n        unlocks = unlocks.concat(getLeadsTo(d, sortedData.religions));\n    }\n    if (sortedData.resources) {\n        unlocks = unlocks.concat(getLeadsTo(d, sortedData.resources));\n    }\n\n    if (d.special) {\n      d.special.forEach(function (s) {\n        s.cat = 'specials';\n        s.requires = [];\n        s.requires.push(d.id);\n        unlocks.push(s);\n      });\n    }\n\n    unlocks.forEach(function (u, j) {\n      let matchFound = 0;\n      unlocksList.forEach(function (l, k) {\n        if (u.id === l.id) {\n          matchFound = 1;\n        }\n      });\n      if (matchFound !== 1) {\n          uniqueUnlocks.push(u);\n      }\n    });\n    unlocksList = unlocksList.concat(uniqueUnlocks);\n\n    let unlocksHandler = [];\n    uniqueUnlocks.forEach(function (u, j) {\n      let unlocksItem = {};\n      unlocksItem.rank = j;\n      unlocksItem.ref = u;\n      unlocksHandler.push(unlocksItem);\n    });\n    d.unlocks = unlocksHandler;\n  });\n\n  // Label data categories\n  types.forEach(function (t) {\n    if (data[t]) {\n      data[t].forEach(function (d) {\n        d.cat = t;\n      });\n    }\n  });\n\n  return sortedData;\n}\n\nfunction Civ4(props) {\n  const {\n    dataTypes,\n    installment,\n    width,\n    height,\n    margin,\n  } = props;\n\n  console.log(civ4Data);\n\n  const orderedData = setupData(civ4Data, installment, dataTypes);\n  console.log(orderedData);\n\n  return (\n    <svg\n      width={width + margin.left + margin.right}\n      height={height + margin.top + margin.bottom}\n    >\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n      </g>\n    </svg>\n  );\n}\n\nexport default Civ4;"]},"metadata":{},"sourceType":"module"}