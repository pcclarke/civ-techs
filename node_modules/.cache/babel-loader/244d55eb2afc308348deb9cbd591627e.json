{"ast":null,"code":"import { cloneDeep } from 'lodash';\nexport function orderDisplayed(data, installment) {\n  let orderedData = cloneDeep(data);\n  let i = 0;\n  let maxCost;\n  let preReqs; // Give each technology an arbitrary position value\n\n  orderedData.displayed.forEach(d => {\n    d.pos = i;\n    i = i + 1;\n  });\n\n  if (installment > 3) {\n    orderedData.displayed.forEach(d => {\n      maxCost = 0;\n\n      if (d.cost) {\n        maxCost = d.cost;\n      }\n\n      preReqs = getTechPrereqs(d, data);\n      preReqs.forEach(p => {\n        if (p.cost > maxCost) {\n          maxCost = p.cost;\n        }\n      });\n      d.pos = maxCost;\n    });\n  }\n\n  orderedData.displayed.sort((a, b) => {\n    return a.pos - b.pos;\n  });\n  i = 0;\n  orderedData.displayed.forEach(d => {\n    d.pos = i;\n    i = i + 1;\n    d.unlocks.forEach(u => {\n      u.pos = i;\n    });\n  });\n  return orderedData;\n}\n;","map":{"version":3,"sources":["/Users/pcclarke/Documents/GitHub/civ-techs/src/libs/orderDisplayed.js"],"names":["cloneDeep","orderDisplayed","data","installment","orderedData","i","maxCost","preReqs","displayed","forEach","d","pos","cost","getTechPrereqs","p","sort","a","b","unlocks","u"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,QAAxB;AAEA,OAAO,SAASC,cAAT,CAAwBC,IAAxB,EAA8BC,WAA9B,EAA2C;AAChD,MAAIC,WAAW,GAAGJ,SAAS,CAACE,IAAD,CAA3B;AACA,MAAIG,CAAC,GAAG,CAAR;AACA,MAAIC,OAAJ;AACA,MAAIC,OAAJ,CAJgD,CAMhD;;AACAH,EAAAA,WAAW,CAACI,SAAZ,CAAsBC,OAAtB,CAA+BC,CAAD,IAAO;AACnCA,IAAAA,CAAC,CAACC,GAAF,GAAQN,CAAR;AACAA,IAAAA,CAAC,GAAGA,CAAC,GAAG,CAAR;AACD,GAHD;;AAKA,MAAIF,WAAW,GAAG,CAAlB,EAAqB;AACnBC,IAAAA,WAAW,CAACI,SAAZ,CAAsBC,OAAtB,CAA+BC,CAAD,IAAO;AACnCJ,MAAAA,OAAO,GAAG,CAAV;;AACA,UAAII,CAAC,CAACE,IAAN,EAAY;AACVN,QAAAA,OAAO,GAAGI,CAAC,CAACE,IAAZ;AACD;;AACDL,MAAAA,OAAO,GAAGM,cAAc,CAACH,CAAD,EAAIR,IAAJ,CAAxB;AAEAK,MAAAA,OAAO,CAACE,OAAR,CAAiBK,CAAD,IAAO;AACrB,YAAIA,CAAC,CAACF,IAAF,GAASN,OAAb,EAAsB;AACpBA,UAAAA,OAAO,GAAGQ,CAAC,CAACF,IAAZ;AACD;AACF,OAJD;AAMAF,MAAAA,CAAC,CAACC,GAAF,GAAQL,OAAR;AACD,KAdD;AAeD;;AAEDF,EAAAA,WAAW,CAACI,SAAZ,CAAsBO,IAAtB,CAA2B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACnC,WAAOD,CAAC,CAACL,GAAF,GAAQM,CAAC,CAACN,GAAjB;AACD,GAFD;AAIAN,EAAAA,CAAC,GAAG,CAAJ;AACAD,EAAAA,WAAW,CAACI,SAAZ,CAAsBC,OAAtB,CAA+BC,CAAD,IAAO;AACnCA,IAAAA,CAAC,CAACC,GAAF,GAAQN,CAAR;AACAA,IAAAA,CAAC,GAAGA,CAAC,GAAG,CAAR;AAEAK,IAAAA,CAAC,CAACQ,OAAF,CAAUT,OAAV,CAAmBU,CAAD,IAAO;AACrBA,MAAAA,CAAC,CAACR,GAAF,GAAQN,CAAR;AACH,KAFD;AAGD,GAPD;AASA,SAAOD,WAAP;AACD;AAAA","sourcesContent":["import {cloneDeep} from 'lodash';\n\nexport function orderDisplayed(data, installment) {\n  let orderedData = cloneDeep(data);\n  let i = 0;\n  let maxCost;\n  let preReqs;\n\n  // Give each technology an arbitrary position value\n  orderedData.displayed.forEach((d) => {\n    d.pos = i;\n    i = i + 1;\n  });\n\n  if (installment > 3) {\n    orderedData.displayed.forEach((d) => {\n      maxCost = 0;\n      if (d.cost) {\n        maxCost = d.cost;\n      }\n      preReqs = getTechPrereqs(d, data);\n\n      preReqs.forEach((p) => {\n        if (p.cost > maxCost) {\n          maxCost = p.cost;\n        }\n      });\n\n      d.pos = maxCost;\n    });\n  }\n\n  orderedData.displayed.sort((a, b) => {\n    return a.pos - b.pos;\n  });\n\n  i = 0;\n  orderedData.displayed.forEach((d) => {\n    d.pos = i;\n    i = i + 1;\n\n    d.unlocks.forEach((u) => {\n        u.pos = i;\n    });\n  });\n\n  return orderedData;\n};"]},"metadata":{},"sourceType":"module"}