{"ast":null,"code":"import _slicedToArray from \"/Users/pcclarke/Documents/GitHub/civ-techs/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Wheel.js\";\nimport React, { useState } from 'react';\nimport { find } from 'lodash';\nimport { getLeadsTo, getTechPrereqs } from '../libs/dataTools.js';\nimport { scaleOrdinal as d3_scaleOrdinal } from 'd3-scale';\nimport { arc as d3_arc } from 'd3-shape';\nimport { schemeCategory10 as d3_schemeCategory10 } from 'd3-scale-chromatic';\nimport startSlice from '../img/startSlice.png';\n\nfunction Wheel(props) {\n  const angleShift = props.angleShift,\n        arcBase = props.arcBase,\n        arcSpace = props.arcSpace,\n        arcWidth = props.arcWidth,\n        data = props.data,\n        empire = props.empire,\n        game = props.game,\n        width = props.width,\n        height = props.height,\n        margin = props.margin;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        notFaded = _useState2[0],\n        setNotFaded = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        tempArcs = _useState4[0],\n        setTempArcs = _useState4[1];\n\n  const color = d3_scaleOrdinal(d3_schemeCategory10);\n  const arc = d3_arc().innerRadius(d => arcBase + arcSpace * d.arcRank).outerRadius(d => arcBase + arcWidth + arcSpace * d.arcRank).startAngle(d => -1 * d.arcBack).endAngle(d => d.arcDist);\n  const unlockArc = d3_arc().innerRadius(d => arcBase + 342.5 + 14 * d.rank).outerRadius(d => arcBase + 342.6 + arcWidth + 14 * d.rank).startAngle(d => -1 * d.arcBack).endAngle(d => d.arcEnd);\n\n  const updateDataFade = d => {\n    let updateNotFaded = [d];\n    updateNotFaded = updateNotFaded.concat(getTechPrereqs(d, data));\n    console.log(d, updateNotFaded);\n    const updateTempArcs = updateNotFaded.map(n => {\n      let tempDist;\n      let tempBack;\n\n      if (d.pos > n.pos) {\n        tempDist = d.pos - n.pos;\n        tempBack = 0;\n      } else {\n        tempDist = 0;\n        tempBack = d.pos - n.pos;\n      }\n\n      let lopt = [];\n\n      if (n.id === d.id) {\n        lopt = d.lopt;\n      } else {\n        n.lopt.forEach(o => {\n          if (o.id === d.id) {\n            lopt.push(o);\n          }\n        });\n      }\n\n      console.log(lopt);\n      let lreq = [];\n\n      if (n.id === d.id) {\n        lreq = d.lreq;\n      } else {\n        n.lreq.forEach(r => {\n          if (r.id === d.id) {\n            lreq.push(r);\n          }\n        });\n      }\n\n      return {\n        arcBack: 2 * Math.PI / data.displayed.length * tempBack,\n        arcDist: 2 * Math.PI / data.displayed.length * tempDist,\n        arcRank: n.arcRank,\n        id: n.id,\n        lopt: lopt,\n        lreq: lreq,\n        pos: n.pod\n      };\n    });\n    updateNotFaded = updateNotFaded.concat(getLeadsTo(d, data.displayed));\n    console.log(updateTempArcs);\n    setNotFaded(updateNotFaded);\n    setTempArcs(updateTempArcs);\n  };\n\n  const setFade = d => {\n    if (notFaded.length > 0) {\n      const notFadedIds = notFaded.map(n => n.id);\n\n      if (notFadedIds.indexOf(d.id) < 0) {\n        return 'fade';\n      }\n    }\n\n    return '';\n  };\n\n  return React.createElement(\"svg\", {\n    width: width + margin.left + margin.right,\n    height: height + margin.top + margin.bottom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    className: \"civTechs\",\n    transform: \"translate(\".concat(margin.left, \", \").concat(margin.top, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    className: \"wheel\",\n    transform: \"translate(\".concat(width / 2, \", \").concat(height / 2, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"image\", {\n    id: \"startSlice\",\n    x: 0,\n    y: -(height / 2),\n    width: 167,\n    height: height / 2,\n    xlinkHref: startSlice,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), React.createElement(\"g\", {\n    className: \"spokeAll\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, data.displayed.map((d, i) => React.createElement(\"g\", {\n    className: \"\".concat(d.id, \" spoke\"),\n    key: \"spoke-\".concat(i),\n    transform: \"rotate(\".concat(d.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"line\", {\n    className: \"spokeLine \".concat(notFaded.length > 0 ? 'fade' : ''),\n    x1: 0,\n    y1: !d.requires && !d.optional ? 0 : -(arcBase + arcSpace * d.spokeRank),\n    x2: 0,\n    y2: -(width / 2) + 160 - d.unlocks.length * 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }), React.createElement(\"image\", {\n    className: \"techImg \".concat(setFade(d)),\n    height: 25,\n    onMouseLeave: () => setNotFaded([]),\n    onMouseOver: () => updateDataFade(d),\n    transform: (() => d.pos > data.displayed.length / 2 ? \"translate(10, \".concat(-(width / 2) + 157, \") rotate(90)\") : \"translate(-10, \".concat(-(width / 2) + 182, \") rotate(270)\"))(),\n    width: 25,\n    xlinkHref: \"/\".concat(game, \"/\").concat(d.cat, \"/\").concat(d.id, \".png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }), d.unlocks.map((u, j) => React.createElement(\"g\", {\n    key: \"unlock-\".concat(j),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, u.lreq && React.createElement(\"g\", {\n    className: \"unlock opaque \".concat(u.ref.id).concat(u.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    className: \"unlockArc\",\n    rank: u.rank,\n    fill: color(u.pos),\n    d: unlockArc(u),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), u.lreq.map((l, k) => React.createElement(\"g\", {\n    className: \"unlockSquare\",\n    key: \"unlock-square-\".concat(k),\n    transform: \"rotate(\".concat(l.dist * (360 / data.displayed.length), \") translate(0, \").concat(-(width / 2) + 145 - 14 * l.arcRank, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(l.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  })))), React.createElement(\"image\", {\n    className: \"unlockIcon \".concat(setFade(d)),\n    height: 13,\n    transform: (() => u.pos > data.displayed.length / 2 ? \"translate(6, \".concat(-(width / 2) + (142 - 14 * u.rank), \") rotate(90)\") : \"translate(-6, \".concat(-(width / 2) + (153 - 14 * u.rank), \") rotate(270)\"))(),\n    width: 13,\n    xlinkHref: (() => {\n      let link;\n\n      if ((u.ref.cat === 'units' || u.ref.cat === 'buildings') && !(game === 'civ1' || game === 'civ2')) {\n        if (u.ref[empire]) {\n          link = \"\".concat(game, \"/\").concat(u.ref.cat, \"/\").concat(u.ref[empire].id, \".png\");\n        } else {\n          link = \"\".concat(game, \"/\").concat(u.ref.cat, \"/\").concat(u.ref.CIVILIZATION_ALL.id, \".png\");\n        }\n      } else {\n        link = \"\".concat(game, \"/\").concat(u.ref.cat, \"/\").concat(u.ref.id, \".png\");\n      }\n\n      return link;\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  })))))), React.createElement(\"g\", {\n    className: \"reqArcs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, data.displayed.map((d, i) => React.createElement(\"g\", {\n    className: \"\".concat(d.id, \" reqGroup \").concat(notFaded.length > 0 ? 'fade' : ''),\n    key: \"req-arcs-\".concat(i),\n    transform: \"rotate(\".concat(d.pos * (360 / data.displayed.length) + angleShift, \")\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    className: \"spokeArc\",\n    d: arc(d),\n    fill: color(d.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }), React.createElement(\"line\", {\n    className: \"spokePin\",\n    x1: 0,\n    y1: -(arcBase + 7 + arcSpace * d.arcRank),\n    x2: 0,\n    y2: -(arcBase - 5 + arcSpace * d.arcRank),\n    strokeWidth: arcWidth,\n    stroke: color(d.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }), d.lreq.map((r, j) => React.createElement(\"g\", {\n    className: \"reqSquare\",\n    key: \"req-square-\".concat(j),\n    transform: (() => {\n      const ang = r.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * r.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(r.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }))), d.lopt.map((o, j) => React.createElement(\"g\", {\n    className: \"optCircle\",\n    key: \"opt-circle-\".concat(j),\n    transform: (() => {\n      const ang = o.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * o.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, React.createElement(\"circle\", {\n    cx: 0,\n    cy: 2,\n    r: 2.5,\n    strokeWidth: 1,\n    stroke: color(o.pos),\n    fill: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266\n    },\n    __self: this\n  })))))), notFaded.length > 0 && tempArcs.length > 0 && React.createElement(\"g\", {\n    className: \"tempArcs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281\n    },\n    __self: this\n  }, tempArcs.map((t, i) => React.createElement(\"g\", {\n    className: \"tempGroup\",\n    key: \"temp-arcs-\".concat(i),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    className: \"tempArc\",\n    d: arc(t),\n    fill: color(t.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287\n    },\n    __self: this\n  }), React.createElement(\"line\", {\n    className: \"tempSpokePin\",\n    x1: 0,\n    y1: -(arcBase + 7 + arcSpace * t.arcRank),\n    x2: 0,\n    y2: -(arcBase - 5 + arcSpace * t.arcRank),\n    strokeWidth: arcWidth,\n    stroke: color(t.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292\n    },\n    __self: this\n  }), t.lreq.map((r, j) => React.createElement(\"g\", {\n    className: \"tempReqSquare\",\n    key: \"req-square-\".concat(j),\n    transform: (() => {\n      console.log(t.lreq);\n      const ang = r.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * r.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: -2.5,\n    y: -0.75,\n    width: 5,\n    height: 5,\n    fill: color(r.pos),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311\n    },\n    __self: this\n  }))), t.lopt.map((o, j) => React.createElement(\"g\", {\n    className: \"optCircle\",\n    key: \"opt-circle-\".concat(j),\n    transform: (() => {\n      const ang = o.dist * (360 / data.displayed.length);\n      return \"rotate(\".concat(ang, \") translate(0, \").concat(-arcBase - 2.5 - arcSpace * o.arcRank, \")\");\n    })(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321\n    },\n    __self: this\n  }, React.createElement(\"circle\", {\n    cx: 0,\n    cy: 2,\n    r: 2.5,\n    strokeWidth: 1,\n    stroke: color(o.pos),\n    fill: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  })))))), React.createElement(\"image\", {\n    x: -75,\n    y: -75,\n    width: 150,\n    height: 150,\n    xlinkHref: \"\".concat(game, \"/\").concat(game, \"-center.png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344\n    },\n    __self: this\n  }))));\n}\n\nexport default Wheel;","map":{"version":3,"sources":["/Users/pcclarke/Documents/GitHub/civ-techs/src/components/Wheel.js"],"names":["React","useState","find","getLeadsTo","getTechPrereqs","scaleOrdinal","d3_scaleOrdinal","arc","d3_arc","schemeCategory10","d3_schemeCategory10","startSlice","Wheel","props","angleShift","arcBase","arcSpace","arcWidth","data","empire","game","width","height","margin","notFaded","setNotFaded","tempArcs","setTempArcs","color","innerRadius","d","arcRank","outerRadius","startAngle","arcBack","endAngle","arcDist","unlockArc","rank","arcEnd","updateDataFade","updateNotFaded","concat","console","log","updateTempArcs","map","n","tempDist","tempBack","pos","lopt","id","forEach","o","push","lreq","r","Math","PI","displayed","length","pod","setFade","notFadedIds","indexOf","left","right","top","bottom","i","requires","optional","spokeRank","unlocks","cat","u","j","ref","l","k","dist","link","CIVILIZATION_ALL","ang","t"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AAEA,SAAQC,IAAR,QAAmB,QAAnB;AAEA,SAAQC,UAAR,EAAoBC,cAApB,QAAyC,sBAAzC;AAEA,SAAQC,YAAY,IAAIC,eAAxB,QAA8C,UAA9C;AACA,SAAQC,GAAG,IAAIC,MAAf,QAA4B,UAA5B;AACA,SAAQC,gBAAgB,IAAIC,mBAA5B,QAAsD,oBAAtD;AAEA,OAAOC,UAAP,MAAuB,uBAAvB;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AAAA,QAElBC,UAFkB,GAYhBD,KAZgB,CAElBC,UAFkB;AAAA,QAGlBC,OAHkB,GAYhBF,KAZgB,CAGlBE,OAHkB;AAAA,QAIlBC,QAJkB,GAYhBH,KAZgB,CAIlBG,QAJkB;AAAA,QAKlBC,QALkB,GAYhBJ,KAZgB,CAKlBI,QALkB;AAAA,QAMlBC,IANkB,GAYhBL,KAZgB,CAMlBK,IANkB;AAAA,QAOlBC,MAPkB,GAYhBN,KAZgB,CAOlBM,MAPkB;AAAA,QAQlBC,IARkB,GAYhBP,KAZgB,CAQlBO,IARkB;AAAA,QASlBC,KATkB,GAYhBR,KAZgB,CASlBQ,KATkB;AAAA,QAUlBC,MAVkB,GAYhBT,KAZgB,CAUlBS,MAVkB;AAAA,QAWlBC,MAXkB,GAYhBV,KAZgB,CAWlBU,MAXkB;;AAAA,oBAcYtB,QAAQ,CAAC,EAAD,CAdpB;AAAA;AAAA,QAcbuB,QAda;AAAA,QAcHC,WAdG;;AAAA,qBAeYxB,QAAQ,CAAC,EAAD,CAfpB;AAAA;AAAA,QAebyB,QAfa;AAAA,QAeHC,WAfG;;AAiBpB,QAAMC,KAAK,GAAGtB,eAAe,CAACI,mBAAD,CAA7B;AAEA,QAAMH,GAAG,GAAGC,MAAM,GACfqB,WADS,CACIC,CAAD,IAAOf,OAAO,GAAIC,QAAQ,GAAGc,CAAC,CAACC,OADlC,EAETC,WAFS,CAEIF,CAAD,IAAQf,OAAO,GAAGE,QAAX,GAAwBD,QAAQ,GAAGc,CAAC,CAACC,OAF/C,EAGTE,UAHS,CAGGH,CAAD,IAAO,CAAC,CAAD,GAAKA,CAAC,CAACI,OAHhB,EAITC,QAJS,CAICL,CAAD,IAAOA,CAAC,CAACM,OAJT,CAAZ;AAMA,QAAMC,SAAS,GAAG7B,MAAM,GACrBqB,WADe,CACFC,CAAD,IAAOf,OAAO,GAAG,KAAV,GAAmB,KAAKe,CAAC,CAACQ,IAD9B,EAEfN,WAFe,CAEFF,CAAD,IAAQf,OAAO,GAAG,KAAV,GAAkBE,QAAnB,GAAgC,KAAKa,CAAC,CAACQ,IAF3C,EAGfL,UAHe,CAGHH,CAAD,IAAO,CAAC,CAAD,GAAKA,CAAC,CAACI,OAHV,EAIfC,QAJe,CAILL,CAAD,IAAOA,CAAC,CAACS,MAJH,CAAlB;;AAMA,QAAMC,cAAc,GAAIV,CAAD,IAAO;AAC5B,QAAIW,cAAc,GAAG,CAACX,CAAD,CAArB;AAEAW,IAAAA,cAAc,GAAGA,cAAc,CAACC,MAAf,CAAsBtC,cAAc,CAAC0B,CAAD,EAAIZ,IAAJ,CAApC,CAAjB;AACAyB,IAAAA,OAAO,CAACC,GAAR,CAAYd,CAAZ,EAAeW,cAAf;AACA,UAAMI,cAAc,GAAGJ,cAAc,CAACK,GAAf,CAAoBC,CAAD,IAAO;AAC/C,UAAIC,QAAJ;AACA,UAAIC,QAAJ;;AACA,UAAInB,CAAC,CAACoB,GAAF,GAAQH,CAAC,CAACG,GAAd,EAAmB;AACfF,QAAAA,QAAQ,GAAGlB,CAAC,CAACoB,GAAF,GAAQH,CAAC,CAACG,GAArB;AACAD,QAAAA,QAAQ,GAAG,CAAX;AACH,OAHD,MAGO;AACHD,QAAAA,QAAQ,GAAG,CAAX;AACAC,QAAAA,QAAQ,GAAGnB,CAAC,CAACoB,GAAF,GAAQH,CAAC,CAACG,GAArB;AACH;;AAED,UAAIC,IAAI,GAAG,EAAX;;AACA,UAAIJ,CAAC,CAACK,EAAF,KAAStB,CAAC,CAACsB,EAAf,EAAmB;AACjBD,QAAAA,IAAI,GAAGrB,CAAC,CAACqB,IAAT;AACD,OAFD,MAEO;AACLJ,QAAAA,CAAC,CAACI,IAAF,CAAOE,OAAP,CAAgBC,CAAD,IAAO;AACpB,cAAIA,CAAC,CAACF,EAAF,KAAStB,CAAC,CAACsB,EAAf,EAAmB;AACjBD,YAAAA,IAAI,CAACI,IAAL,CAAUD,CAAV;AACD;AACF,SAJD;AAKD;;AACDX,MAAAA,OAAO,CAACC,GAAR,CAAYO,IAAZ;AAEA,UAAIK,IAAI,GAAG,EAAX;;AACA,UAAIT,CAAC,CAACK,EAAF,KAAStB,CAAC,CAACsB,EAAf,EAAmB;AACjBI,QAAAA,IAAI,GAAG1B,CAAC,CAAC0B,IAAT;AACD,OAFD,MAEO;AACLT,QAAAA,CAAC,CAACS,IAAF,CAAOH,OAAP,CAAgBI,CAAD,IAAO;AACpB,cAAIA,CAAC,CAACL,EAAF,KAAStB,CAAC,CAACsB,EAAf,EAAmB;AACjBI,YAAAA,IAAI,CAACD,IAAL,CAAUE,CAAV;AACD;AACF,SAJD;AAKD;;AAED,aAAO;AACLvB,QAAAA,OAAO,EAAI,IAAIwB,IAAI,CAACC,EAAV,GAAgBzC,IAAI,CAAC0C,SAAL,CAAeC,MAAhC,GAA0CZ,QAD9C;AAELb,QAAAA,OAAO,EAAI,IAAIsB,IAAI,CAACC,EAAV,GAAgBzC,IAAI,CAAC0C,SAAL,CAAeC,MAAhC,GAA0Cb,QAF9C;AAGLjB,QAAAA,OAAO,EAAEgB,CAAC,CAAChB,OAHN;AAILqB,QAAAA,EAAE,EAAEL,CAAC,CAACK,EAJD;AAKLD,QAAAA,IAAI,EAAEA,IALD;AAMLK,QAAAA,IAAI,EAAEA,IAND;AAOLN,QAAAA,GAAG,EAAEH,CAAC,CAACe;AAPF,OAAP;AASD,KA3CsB,CAAvB;AA4CArB,IAAAA,cAAc,GAAGA,cAAc,CAACC,MAAf,CAAsBvC,UAAU,CAAC2B,CAAD,EAAIZ,IAAI,CAAC0C,SAAT,CAAhC,CAAjB;AAEAjB,IAAAA,OAAO,CAACC,GAAR,CAAYC,cAAZ;AAEApB,IAAAA,WAAW,CAACgB,cAAD,CAAX;AACAd,IAAAA,WAAW,CAACkB,cAAD,CAAX;AAED,GAxDD;;AA0DA,QAAMkB,OAAO,GAAIjC,CAAD,IAAO;AACrB,QAAIN,QAAQ,CAACqC,MAAT,GAAkB,CAAtB,EAAyB;AACvB,YAAMG,WAAW,GAAGxC,QAAQ,CAACsB,GAAT,CAAcC,CAAD,IAAOA,CAAC,CAACK,EAAtB,CAApB;;AAEA,UAAIY,WAAW,CAACC,OAAZ,CAAoBnC,CAAC,CAACsB,EAAtB,IAA4B,CAAhC,EAAmC;AACjC,eAAO,MAAP;AACD;AACF;;AAED,WAAO,EAAP;AACD,GAVD;;AAYA,SACE;AACE,IAAA,KAAK,EAAE/B,KAAK,GAAGE,MAAM,CAAC2C,IAAf,GAAsB3C,MAAM,CAAC4C,KADtC;AAEE,IAAA,MAAM,EAAE7C,MAAM,GAAGC,MAAM,CAAC6C,GAAhB,GAAsB7C,MAAM,CAAC8C,MAFvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AACE,IAAA,SAAS,EAAC,UADZ;AAEE,IAAA,SAAS,sBAAe9C,MAAM,CAAC2C,IAAtB,eAA+B3C,MAAM,CAAC6C,GAAtC,MAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AACE,IAAA,SAAS,EAAC,OADZ;AAEE,IAAA,SAAS,sBAAe/C,KAAK,GAAG,CAAvB,eAA6BC,MAAM,GAAG,CAAtC,MAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AACE,IAAA,EAAE,EAAC,YADL;AAEE,IAAA,CAAC,EAAE,CAFL;AAGE,IAAA,CAAC,EAAE,EAAEA,MAAM,GAAC,CAAT,CAHL;AAIE,IAAA,KAAK,EAAE,GAJT;AAKE,IAAA,MAAM,EAAEA,MAAM,GAAC,CALjB;AAME,IAAA,SAAS,EAAEX,UANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,EAYI;AAAG,IAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEEO,IAAI,CAAC0C,SAAL,CAAed,GAAf,CAAmB,CAAChB,CAAD,EAAIwC,CAAJ,KACjB;AACE,IAAA,SAAS,YAAKxC,CAAC,CAACsB,EAAP,WADX;AAEE,IAAA,GAAG,kBAAWkB,CAAX,CAFL;AAGE,IAAA,SAAS,mBAAYxC,CAAC,CAACoB,GAAF,IAAS,MAAMhC,IAAI,CAAC0C,SAAL,CAAeC,MAA9B,IAAwC/C,UAApD,MAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE;AACE,IAAA,SAAS,sBAAgBU,QAAQ,CAACqC,MAAT,GAAkB,CAAnB,GAAwB,MAAxB,GAAiC,EAAhD,CADX;AAEE,IAAA,EAAE,EAAE,CAFN;AAGE,IAAA,EAAE,EAAG,CAAC/B,CAAC,CAACyC,QAAH,IAAe,CAACzC,CAAC,CAAC0C,QAAnB,GAA+B,CAA/B,GAAmC,EAAEzD,OAAO,GAAIC,QAAQ,GAAGc,CAAC,CAAC2C,SAA1B,CAHzC;AAIE,IAAA,EAAE,EAAE,CAJN;AAKE,IAAA,EAAE,EAAE,EAAEpD,KAAK,GAAG,CAAV,IAAe,GAAf,GAAsBS,CAAC,CAAC4C,OAAF,CAAUb,MAAV,GAAmB,EAL/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAYE;AACE,IAAA,SAAS,oBAAaE,OAAO,CAACjC,CAAD,CAApB,CADX;AAEE,IAAA,MAAM,EAAE,EAFV;AAGE,IAAA,YAAY,EAAE,MAAML,WAAW,CAAC,EAAD,CAHjC;AAIE,IAAA,WAAW,EAAE,MAAMe,cAAc,CAACV,CAAD,CAJnC;AAKE,IAAA,SAAS,EAAE,CAAC,MAAOA,CAAC,CAACoB,GAAF,GAAShC,IAAI,CAAC0C,SAAL,CAAeC,MAAf,GAAwB,CAAlC,2BACE,EAAExC,KAAK,GAAG,CAAV,IAAe,GADjB,6CAEG,EAAEA,KAAK,GAAG,CAAV,IAAe,GAFlB,kBAAP,GALb;AAQE,IAAA,KAAK,EAAE,EART;AASE,IAAA,SAAS,aAAMD,IAAN,cAAcU,CAAC,CAAC6C,GAAhB,cAAuB7C,CAAC,CAACsB,EAAzB,SATX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,EAuBGtB,CAAC,CAAC4C,OAAF,CAAU5B,GAAV,CAAc,CAAC8B,CAAD,EAAIC,CAAJ,KACb;AAAG,IAAA,GAAG,mBAAYA,CAAZ,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,CAAC,CAACpB,IAAF,IACC;AAAG,IAAA,SAAS,0BAAmBoB,CAAC,CAACE,GAAF,CAAM1B,EAAzB,SAA8BwB,CAAC,CAAC1B,GAAhC,CAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,IAAI,EAAE0B,CAAC,CAACtC,IAFV;AAGE,IAAA,IAAI,EAAEV,KAAK,CAACgD,CAAC,CAAC1B,GAAH,CAHb;AAIE,IAAA,CAAC,EAAEb,SAAS,CAACuC,CAAD,CAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOGA,CAAC,CAACpB,IAAF,CAAOV,GAAP,CAAW,CAACiC,CAAD,EAAIC,CAAJ,KACV;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,GAAG,0BAAmBA,CAAnB,CAFL;AAGE,IAAA,SAAS,mBAAYD,CAAC,CAACE,IAAF,IAAU,MAAM/D,IAAI,CAAC0C,SAAL,CAAeC,MAA/B,CAAZ,4BAAqE,EAAExC,KAAK,GAAC,CAAR,IAAa,GAAb,GAAoB,KAAK0D,CAAC,CAAChD,OAAhG,MAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE;AACE,IAAA,CAAC,EAAE,CAAC,GADN;AAEE,IAAA,CAAC,EAAE,CAAC,IAFN;AAGE,IAAA,KAAK,EAAE,CAHT;AAIE,IAAA,MAAM,EAAE,CAJV;AAKE,IAAA,IAAI,EAAEH,KAAK,CAACmD,CAAC,CAAC7B,GAAH,CALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADD,CAPH,CAFJ,EA0BE;AACE,IAAA,SAAS,uBAAgBa,OAAO,CAACjC,CAAD,CAAvB,CADX;AAEE,IAAA,MAAM,EAAE,EAFV;AAGE,IAAA,SAAS,EAAE,CAAC,MAAO8C,CAAC,CAAC1B,GAAF,GAAShC,IAAI,CAAC0C,SAAL,CAAeC,MAAf,GAAwB,CAAlC,0BACC,EAAExC,KAAK,GAAG,CAAV,KAAgB,MAAO,KAAKuD,CAAC,CAACtC,IAA9B,CADD,4CAEE,EAAEjB,KAAK,GAAG,CAAV,KAAgB,MAAO,KAAKuD,CAAC,CAACtC,IAA9B,CAFF,kBAAP,GAHb;AAME,IAAA,KAAK,EAAE,EANT;AAOE,IAAA,SAAS,EAAE,CAAC,MAAM;AAChB,UAAI4C,IAAJ;;AACA,UAAI,CAACN,CAAC,CAACE,GAAF,CAAMH,GAAN,KAAc,OAAd,IAAyBC,CAAC,CAACE,GAAF,CAAMH,GAAN,KAAc,WAAxC,KACA,EAAEvD,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,MAA9B,CADJ,EAC2C;AACvC,YAAIwD,CAAC,CAACE,GAAF,CAAM3D,MAAN,CAAJ,EAAmB;AACf+D,UAAAA,IAAI,aAAM9D,IAAN,cAAcwD,CAAC,CAACE,GAAF,CAAMH,GAApB,cAA2BC,CAAC,CAACE,GAAF,CAAM3D,MAAN,EAAciC,EAAzC,SAAJ;AACH,SAFD,MAEO;AACH8B,UAAAA,IAAI,aAAM9D,IAAN,cAAcwD,CAAC,CAACE,GAAF,CAAMH,GAApB,cAA2BC,CAAC,CAACE,GAAF,CAAMK,gBAAN,CAAuB/B,EAAlD,SAAJ;AACH;AACJ,OAPD,MAOO;AACH8B,QAAAA,IAAI,aAAM9D,IAAN,cAAcwD,CAAC,CAACE,GAAF,CAAMH,GAApB,cAA2BC,CAAC,CAACE,GAAF,CAAM1B,EAAjC,SAAJ;AACH;;AAED,aAAO8B,IAAP;AACD,KAdU,GAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BF,CADD,CAvBH,CADF,CAFF,CAZJ,EA+FE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhE,IAAI,CAAC0C,SAAL,CAAed,GAAf,CAAmB,CAAChB,CAAD,EAAIwC,CAAJ,KAClB;AACE,IAAA,SAAS,YAAKxC,CAAC,CAACsB,EAAP,uBAAuB5B,QAAQ,CAACqC,MAAT,GAAkB,CAAnB,GAAwB,MAAxB,GAAiC,EAAvD,CADX;AAEE,IAAA,GAAG,qBAAcS,CAAd,CAFL;AAGE,IAAA,SAAS,mBAAYxC,CAAC,CAACoB,GAAF,IAAS,MAAMhC,IAAI,CAAC0C,SAAL,CAAeC,MAA9B,IAAwC/C,UAApD,MAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE;AACE,IAAA,SAAS,EAAC,UADZ;AAEE,IAAA,CAAC,EAAEP,GAAG,CAACuB,CAAD,CAFR;AAGE,IAAA,IAAI,EAAEF,KAAK,CAACE,CAAC,CAACoB,GAAH,CAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAUE;AACE,IAAA,SAAS,EAAC,UADZ;AAEE,IAAA,EAAE,EAAE,CAFN;AAGE,IAAA,EAAE,EAAE,EAAEnC,OAAO,GAAG,CAAV,GAAeC,QAAQ,GAAGc,CAAC,CAACC,OAA9B,CAHN;AAIE,IAAA,EAAE,EAAE,CAJN;AAKE,IAAA,EAAE,EAAE,EAAEhB,OAAO,GAAG,CAAV,GAAeC,QAAQ,GAAGc,CAAC,CAACC,OAA9B,CALN;AAME,IAAA,WAAW,EAAEd,QANf;AAOE,IAAA,MAAM,EAAEW,KAAK,CAACE,CAAC,CAACoB,GAAH,CAPf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,EAmBGpB,CAAC,CAAC0B,IAAF,CAAOV,GAAP,CAAW,CAACW,CAAD,EAAIoB,CAAJ,KACV;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,GAAG,uBAAgBA,CAAhB,CAFL;AAGE,IAAA,SAAS,EAAE,CAAC,MAAM;AAChB,YAAMO,GAAG,GAAG3B,CAAC,CAACwB,IAAF,IAAU,MAAM/D,IAAI,CAAC0C,SAAL,CAAeC,MAA/B,CAAZ;AACA,8BAAiBuB,GAAjB,4BAAuC,CAACrE,OAAD,GAAW,GAAX,GAAkBC,QAAQ,GAAGyC,CAAC,CAAC1B,OAAtE;AACD,KAHU,GAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE;AACE,IAAA,CAAC,EAAE,CAAC,GADN;AAEE,IAAA,CAAC,EAAE,CAAC,IAFN;AAGE,IAAA,KAAK,EAAE,CAHT;AAIE,IAAA,MAAM,EAAE,CAJV;AAKE,IAAA,IAAI,EAAEH,KAAK,CAAC6B,CAAC,CAACP,GAAH,CALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADD,CAnBH,EAqCGpB,CAAC,CAACqB,IAAF,CAAOL,GAAP,CAAW,CAACQ,CAAD,EAAIuB,CAAJ,KACV;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,GAAG,uBAAgBA,CAAhB,CAFL;AAGE,IAAA,SAAS,EAAE,CAAC,MAAM;AAChB,YAAMO,GAAG,GAAG9B,CAAC,CAAC2B,IAAF,IAAU,MAAM/D,IAAI,CAAC0C,SAAL,CAAeC,MAA/B,CAAZ;AACA,8BAAiBuB,GAAjB,4BAAuC,CAACrE,OAAD,GAAW,GAAX,GAAkBC,QAAQ,GAAGsC,CAAC,CAACvB,OAAtE;AACD,KAHU,GAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE;AACE,IAAA,EAAE,EAAE,CADN;AAEE,IAAA,EAAE,EAAE,CAFN;AAGE,IAAA,CAAC,EAAE,GAHL;AAIE,IAAA,WAAW,EAAE,CAJf;AAKE,IAAA,MAAM,EAAEH,KAAK,CAAC0B,CAAC,CAACJ,GAAH,CALf;AAME,IAAA,IAAI,EAAC,OANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADD,CArCH,CADD,CADH,CA/FF,EA6JI1B,QAAQ,CAACqC,MAAT,GAAkB,CAAlB,IAAuBnC,QAAQ,CAACmC,MAAT,GAAkB,CAA1C,IACC;AAAG,IAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGnC,QAAQ,CAACoB,GAAT,CAAa,CAACuC,CAAD,EAAIf,CAAJ,KACZ;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,GAAG,sBAAeA,CAAf,CAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AACE,IAAA,SAAS,EAAC,SADZ;AAEE,IAAA,CAAC,EAAE/D,GAAG,CAAC8E,CAAD,CAFR;AAGE,IAAA,IAAI,EAAEzD,KAAK,CAACyD,CAAC,CAACnC,GAAH,CAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,EASE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,EAAE,EAAE,CAFN;AAGE,IAAA,EAAE,EAAE,EAAEnC,OAAO,GAAG,CAAV,GAAeC,QAAQ,GAAGqE,CAAC,CAACtD,OAA9B,CAHN;AAIE,IAAA,EAAE,EAAE,CAJN;AAKE,IAAA,EAAE,EAAE,EAAEhB,OAAO,GAAG,CAAV,GAAeC,QAAQ,GAAGqE,CAAC,CAACtD,OAA9B,CALN;AAME,IAAA,WAAW,EAAEd,QANf;AAOE,IAAA,MAAM,EAAEW,KAAK,CAACyD,CAAC,CAACnC,GAAH,CAPf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,EAkBEmC,CAAC,CAAC7B,IAAF,CAAOV,GAAP,CAAW,CAACW,CAAD,EAAIoB,CAAJ,KACT;AACE,IAAA,SAAS,EAAC,eADZ;AAEE,IAAA,GAAG,uBAAgBA,CAAhB,CAFL;AAGE,IAAA,SAAS,EAAE,CAAC,MAAM;AAChBlC,MAAAA,OAAO,CAACC,GAAR,CAAYyC,CAAC,CAAC7B,IAAd;AACA,YAAM4B,GAAG,GAAG3B,CAAC,CAACwB,IAAF,IAAU,MAAM/D,IAAI,CAAC0C,SAAL,CAAeC,MAA/B,CAAZ;AACA,8BAAiBuB,GAAjB,4BAAuC,CAACrE,OAAD,GAAW,GAAX,GAAkBC,QAAQ,GAAGyC,CAAC,CAAC1B,OAAtE;AACD,KAJU,GAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASE;AACE,IAAA,CAAC,EAAE,CAAC,GADN;AAEE,IAAA,CAAC,EAAE,CAAC,IAFN;AAGE,IAAA,KAAK,EAAE,CAHT;AAIE,IAAA,MAAM,EAAE,CAJV;AAKE,IAAA,IAAI,EAAEH,KAAK,CAAC6B,CAAC,CAACP,GAAH,CALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CADF,CAlBF,EAqCGmC,CAAC,CAAClC,IAAF,CAAOL,GAAP,CAAW,CAACQ,CAAD,EAAIuB,CAAJ,KACV;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,GAAG,uBAAgBA,CAAhB,CAFL;AAGE,IAAA,SAAS,EAAE,CAAC,MAAM;AAChB,YAAMO,GAAG,GAAG9B,CAAC,CAAC2B,IAAF,IAAU,MAAM/D,IAAI,CAAC0C,SAAL,CAAeC,MAA/B,CAAZ;AACA,8BAAiBuB,GAAjB,4BAAuC,CAACrE,OAAD,GAAW,GAAX,GAAkBC,QAAQ,GAAGsC,CAAC,CAACvB,OAAtE;AACD,KAHU,GAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE;AACE,IAAA,EAAE,EAAE,CADN;AAEE,IAAA,EAAE,EAAE,CAFN;AAGE,IAAA,CAAC,EAAE,GAHL;AAIE,IAAA,WAAW,EAAE,CAJf;AAKE,IAAA,MAAM,EAAEH,KAAK,CAAC0B,CAAC,CAACJ,GAAH,CALf;AAME,IAAA,IAAI,EAAC,OANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADD,CArCH,CADD,CADH,CA9JJ,EA6NE;AACE,IAAA,CAAC,EAAE,CAAC,EADN;AAEE,IAAA,CAAC,EAAE,CAAC,EAFN;AAGE,IAAA,KAAK,EAAE,GAHT;AAIE,IAAA,MAAM,EAAE,GAJV;AAKE,IAAA,SAAS,YAAK9B,IAAL,cAAaA,IAAb,gBALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7NF,CAJF,CAJF,CADF;AAiPD;;AAED,eAAeR,KAAf","sourcesContent":["import React, {useState} from 'react';\n\nimport {find} from 'lodash';\n\nimport {getLeadsTo, getTechPrereqs} from '../libs/dataTools.js';\n\nimport {scaleOrdinal as d3_scaleOrdinal} from 'd3-scale';\nimport {arc as d3_arc} from 'd3-shape';\nimport {schemeCategory10 as d3_schemeCategory10} from 'd3-scale-chromatic';\n\nimport startSlice from '../img/startSlice.png';\n\nfunction Wheel(props) {\n  const {\n    angleShift,\n    arcBase,\n    arcSpace,\n    arcWidth,\n    data,\n    empire,\n    game,\n    width,\n    height,\n    margin,\n  } = props;\n\n  const [notFaded, setNotFaded] = useState([]);\n  const [tempArcs, setTempArcs] = useState([]);\n\n  const color = d3_scaleOrdinal(d3_schemeCategory10);\n\n  const arc = d3_arc()\n    .innerRadius((d) => arcBase + (arcSpace * d.arcRank))\n    .outerRadius((d) => (arcBase + arcWidth) + (arcSpace * d.arcRank))\n    .startAngle((d) => -1 * d.arcBack)\n    .endAngle((d) => d.arcDist);\n\n  const unlockArc = d3_arc()\n    .innerRadius((d) => arcBase + 342.5 + (14 * d.rank))\n    .outerRadius((d) => (arcBase + 342.6 + arcWidth) + (14 * d.rank))\n    .startAngle((d) => -1 * d.arcBack)\n    .endAngle((d) => d.arcEnd);\n\n  const updateDataFade = (d) => {\n    let updateNotFaded = [d];\n\n    updateNotFaded = updateNotFaded.concat(getTechPrereqs(d, data));\n    console.log(d, updateNotFaded);\n    const updateTempArcs = updateNotFaded.map((n) => {\n      let tempDist;\n      let tempBack;\n      if (d.pos > n.pos) {\n          tempDist = d.pos - n.pos;\n          tempBack = 0;\n      } else {\n          tempDist = 0;\n          tempBack = d.pos - n.pos;\n      }\n\n      let lopt = [];\n      if (n.id === d.id) {\n        lopt = d.lopt;\n      } else {\n        n.lopt.forEach((o) => {\n          if (o.id === d.id) {\n            lopt.push(o);\n          }\n        });\n      }\n      console.log(lopt);\n\n      let lreq = [];\n      if (n.id === d.id) {\n        lreq = d.lreq;\n      } else {\n        n.lreq.forEach((r) => {\n          if (r.id === d.id) {\n            lreq.push(r);\n          }\n        });\n      }\n\n      return {\n        arcBack: ((2 * Math.PI) / data.displayed.length) * tempBack,\n        arcDist: ((2 * Math.PI) / data.displayed.length) * tempDist,\n        arcRank: n.arcRank,\n        id: n.id,\n        lopt: lopt,\n        lreq: lreq,\n        pos: n.pod,\n      };\n    });\n    updateNotFaded = updateNotFaded.concat(getLeadsTo(d, data.displayed));\n\n    console.log(updateTempArcs);\n\n    setNotFaded(updateNotFaded);\n    setTempArcs(updateTempArcs);\n\n  };\n\n  const setFade = (d) => {\n    if (notFaded.length > 0) {\n      const notFadedIds = notFaded.map((n) => n.id);\n\n      if (notFadedIds.indexOf(d.id) < 0) {\n        return 'fade';\n      }\n    }\n\n    return '';\n  }\n\n  return (\n    <svg\n      width={width + margin.left + margin.right}\n      height={height + margin.top + margin.bottom}\n    >\n      <g\n        className='civTechs'\n        transform={`translate(${margin.left}, ${margin.top})`}\n      >\n        <g\n          className='wheel'\n          transform={`translate(${width / 2}, ${height / 2})`}\n        >\n          <image\n            id='startSlice'\n            x={0}\n            y={-(height/2)}\n            width={167}\n            height={height/2}\n            xlinkHref={startSlice}\n          />\n            <g className='spokeAll'>\n            {\n              data.displayed.map((d, i) => (\n                <g\n                  className={`${d.id} spoke`}\n                  key={`spoke-${i}`}\n                  transform={`rotate(${d.pos * (360 / data.displayed.length) + angleShift})`}\n                >\n                  <line\n                    className={`spokeLine ${(notFaded.length > 0) ? 'fade' : ''}`}\n                    x1={0}\n                    y1={(!d.requires && !d.optional) ? 0 : -(arcBase + (arcSpace * d.spokeRank))}\n                    x2={0}\n                    y2={-(width / 2) + 160 - (d.unlocks.length * 14)}\n                  />\n                  <image\n                    className={`techImg ${setFade(d)}`}\n                    height={25}\n                    onMouseLeave={() => setNotFaded([])}\n                    onMouseOver={() => updateDataFade(d)}\n                    transform={(() => (d.pos > (data.displayed.length / 2)) ?\n                      `translate(10, ${(-(width / 2) + 157)}) rotate(90)` :\n                      `translate(-10, ${(-(width / 2) + 182)}) rotate(270)`)()}\n                    width={25}\n                    xlinkHref={`/${game}/${d.cat}/${d.id}.png`}\n                  />\n                  {d.unlocks.map((u, j) => (\n                    <g key={`unlock-${j}`}>\n                      {u.lreq &&\n                        <g className={`unlock opaque ${u.ref.id}${u.pos}`}>\n                          <path\n                            className='unlockArc'\n                            rank={u.rank}\n                            fill={color(u.pos)}\n                            d={unlockArc(u)}\n                          />\n                          {u.lreq.map((l, k) => (\n                            <g\n                              className='unlockSquare'\n                              key={`unlock-square-${k}`}\n                              transform={`rotate(${l.dist * (360 / data.displayed.length)}) translate(0, ${(-(width/2) + 145 - (14 * l.arcRank))})`}\n                            >\n                              <rect\n                                x={-2.5}\n                                y={-0.75}\n                                width={5}\n                                height={5}\n                                fill={color(l.pos)}\n                              />\n                            </g>\n                          ))}\n                        </g>\n                      }\n                      <image\n                        className={`unlockIcon ${setFade(d)}`}\n                        height={13}\n                        transform={(() => (u.pos > (data.displayed.length / 2)) ?\n                          `translate(6, ${(-(width / 2) + (142 - (14 * u.rank)))}) rotate(90)` :\n                          `translate(-6, ${(-(width / 2) + (153 - (14 * u.rank)))}) rotate(270)`)()}\n                        width={13}\n                        xlinkHref={(() => {\n                          let link;\n                          if ((u.ref.cat === 'units' || u.ref.cat === 'buildings') &&\n                              !(game === 'civ1' || game === 'civ2')) {\n                              if (u.ref[empire]) {\n                                  link = `${game}/${u.ref.cat}/${u.ref[empire].id}.png`;\n                              } else {\n                                  link = `${game}/${u.ref.cat}/${u.ref.CIVILIZATION_ALL.id}.png`;\n                              }\n                          } else {\n                              link = `${game}/${u.ref.cat}/${u.ref.id}.png`;\n                          }\n\n                          return link;\n                        })()}\n                      />\n                    </g>\n                  ))}\n                </g>\n              ))\n            }\n          </g>\n\n          <g className='reqArcs'>\n            {data.displayed.map((d, i) => (\n              <g\n                className={`${d.id} reqGroup ${(notFaded.length > 0) ? 'fade' : ''}`}\n                key={`req-arcs-${i}`}\n                transform={`rotate(${d.pos * (360 / data.displayed.length) + angleShift})`}\n              >\n                <path\n                  className='spokeArc'\n                  d={arc(d)}\n                  fill={color(d.pos)}\n                />\n                <line\n                  className='spokePin'\n                  x1={0}\n                  y1={-(arcBase + 7 + (arcSpace * d.arcRank))}\n                  x2={0}\n                  y2={-(arcBase - 5 + (arcSpace * d.arcRank))}\n                  strokeWidth={arcWidth}\n                  stroke={color(d.pos)}\n                />\n                {d.lreq.map((r, j) => (\n                  <g\n                    className='reqSquare'\n                    key={`req-square-${j}`}\n                    transform={(() => {\n                      const ang = r.dist * (360 / data.displayed.length);\n                      return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * r.arcRank))})`;\n                    })()}\n                  >\n                    <rect\n                      x={-2.5}\n                      y={-0.75}\n                      width={5}\n                      height={5}\n                      fill={color(r.pos)}\n                    />\n                  </g>\n                ))}\n                {d.lopt.map((o, j) => (\n                  <g\n                    className='optCircle'\n                    key={`opt-circle-${j}`}\n                    transform={(() => {\n                      const ang = o.dist * (360 / data.displayed.length);\n                      return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * o.arcRank))})`;\n                    })()}\n                  >\n                    <circle\n                      cx={0}\n                      cy={2}\n                      r={2.5}\n                      strokeWidth={1}\n                      stroke={color(o.pos)}\n                      fill='white'\n                    />\n                  </g>\n                ))}\n              </g>\n            ))}\n          </g>\n\n          {(notFaded.length > 0 && tempArcs.length > 0) &&\n            <g className='tempArcs'>\n              {tempArcs.map((t, i) => (\n                <g\n                  className='tempGroup'\n                  key={`temp-arcs-${i}`}\n                >\n                  <path\n                    className='tempArc'\n                    d={arc(t)}\n                    fill={color(t.pos)}\n                  />\n                  <line\n                    className='tempSpokePin'\n                    x1={0}\n                    y1={-(arcBase + 7 + (arcSpace * t.arcRank))}\n                    x2={0}\n                    y2={-(arcBase - 5 + (arcSpace * t.arcRank))}\n                    strokeWidth={arcWidth}\n                    stroke={color(t.pos)}\n                  />\n                 {t.lreq.map((r, j) => (\n                    <g\n                      className='tempReqSquare'\n                      key={`req-square-${j}`}\n                      transform={(() => {\n                        console.log(t.lreq);\n                        const ang = r.dist * (360 / data.displayed.length);\n                        return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * r.arcRank))})`;\n                      })()}\n                    >\n                      <rect\n                        x={-2.5}\n                        y={-0.75}\n                        width={5}\n                        height={5}\n                        fill={color(r.pos)}\n                      />\n                    </g>\n                  ))}\n                  {t.lopt.map((o, j) => (\n                    <g\n                      className='optCircle'\n                      key={`opt-circle-${j}`}\n                      transform={(() => {\n                        const ang = o.dist * (360 / data.displayed.length);\n                        return `rotate(${ang}) translate(0, ${(-arcBase - 2.5 - (arcSpace * o.arcRank))})`;\n                      })()}\n                    >\n                      <circle\n                        cx={0}\n                        cy={2}\n                        r={2.5}\n                        strokeWidth={1}\n                        stroke={color(o.pos)}\n                        fill='white'\n                      />\n                    </g>\n                  ))}\n                </g>\n              ))}\n            </g>\n          }\n\n          <image\n            x={-75}\n            y={-75}\n            width={150}\n            height={150}\n            xlinkHref={`${game}/${game}-center.png`}\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default Wheel;\n"]},"metadata":{},"sourceType":"module"}